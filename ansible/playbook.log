[WARNING]: Found both group and host with same name: haproxy
Using /Users/geoffmontee/pg-ha-cluster/ansible/ansible.cfg as config file

PLAY [Apply common configuration to all hosts] *********************************

TASK [Gathering Facts] *********************************************************
Monday 15 December 2025  23:30:11 -0800 (0:00:00.010)       0:00:00.010 ******* 
ok: [pg-standby-2]
ok: [pg-primary]
ok: [pg-standby-1]
ok: [haproxy]

TASK [common : Update apt cache] ***********************************************
Monday 15 December 2025  23:30:14 -0800 (0:00:03.243)       0:00:03.254 ******* 
ok: [haproxy] => {"cache_update_time": 1765869052, "cache_updated": false, "changed": false}
ok: [pg-standby-1] => {"cache_update_time": 1765869963, "cache_updated": false, "changed": false}
ok: [pg-standby-2] => {"cache_update_time": 1765869963, "cache_updated": false, "changed": false}
ok: [pg-primary] => {"cache_update_time": 1765869963, "cache_updated": false, "changed": false}

TASK [common : Install common packages] ****************************************
Monday 15 December 2025  23:30:16 -0800 (0:00:01.611)       0:00:04.865 ******* 
ok: [pg-standby-2] => {"cache_update_time": 1765869963, "cache_updated": false, "changed": false}
ok: [haproxy] => {"cache_update_time": 1765869052, "cache_updated": false, "changed": false}
ok: [pg-primary] => {"cache_update_time": 1765869963, "cache_updated": false, "changed": false}
ok: [pg-standby-1] => {"cache_update_time": 1765869963, "cache_updated": false, "changed": false}

TASK [common : Set timezone] ***************************************************
Monday 15 December 2025  23:30:17 -0800 (0:00:01.597)       0:00:06.463 ******* 
ok: [haproxy] => {"changed": false}
ok: [pg-standby-2] => {"changed": false}
ok: [pg-standby-1] => {"changed": false}
ok: [pg-primary] => {"changed": false}

TASK [common : Configure /etc/hosts for cluster nodes] *************************
Monday 15 December 2025  23:30:18 -0800 (0:00:00.813)       0:00:07.276 ******* 
ok: [pg-standby-1] => (item=haproxy) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "haproxy", "msg": ""}
ok: [haproxy] => (item=haproxy) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "haproxy", "msg": ""}
ok: [pg-standby-2] => (item=haproxy) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "haproxy", "msg": ""}
ok: [pg-primary] => (item=haproxy) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "haproxy", "msg": ""}
ok: [pg-standby-1] => (item=pg-primary) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-primary", "msg": ""}
ok: [haproxy] => (item=pg-primary) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-primary", "msg": ""}
ok: [pg-standby-2] => (item=pg-primary) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-primary", "msg": ""}
ok: [pg-primary] => (item=pg-primary) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-primary", "msg": ""}
ok: [pg-standby-1] => (item=pg-standby-1) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-1", "msg": ""}
ok: [haproxy] => (item=pg-standby-1) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-1", "msg": ""}
ok: [pg-standby-2] => (item=pg-standby-1) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-1", "msg": ""}
ok: [pg-primary] => (item=pg-standby-1) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-1", "msg": ""}
ok: [pg-standby-1] => (item=pg-standby-2) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-2", "msg": ""}
ok: [haproxy] => (item=pg-standby-2) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-2", "msg": ""}
ok: [pg-standby-2] => (item=pg-standby-2) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-2", "msg": ""}
ok: [pg-primary] => (item=pg-standby-2) => {"ansible_loop_var": "item", "backup": "", "changed": false, "item": "pg-standby-2", "msg": ""}

TASK [common : Disable swap (recommended for databases)] ***********************
Monday 15 December 2025  23:30:21 -0800 (0:00:02.554)       0:00:09.830 ******* 
ok: [pg-standby-1] => {"changed": false, "cmd": ["swapoff", "-a"], "delta": "0:00:00.004135", "end": "2025-12-16 07:30:21.651255", "msg": "", "rc": 0, "start": "2025-12-16 07:30:21.647120", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
ok: [haproxy] => {"changed": false, "cmd": ["swapoff", "-a"], "delta": "0:00:00.011040", "end": "2025-12-16 07:30:21.687719", "msg": "", "rc": 0, "start": "2025-12-16 07:30:21.676679", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
ok: [pg-standby-2] => {"changed": false, "cmd": ["swapoff", "-a"], "delta": "0:00:00.003704", "end": "2025-12-16 07:30:21.692515", "msg": "", "rc": 0, "start": "2025-12-16 07:30:21.688811", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
ok: [pg-primary] => {"changed": false, "cmd": ["swapoff", "-a"], "delta": "0:00:00.004907", "end": "2025-12-16 07:30:21.698719", "msg": "", "rc": 0, "start": "2025-12-16 07:30:21.693812", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [common : Remove swap from fstab] *****************************************
Monday 15 December 2025  23:30:21 -0800 (0:00:00.704)       0:00:10.535 ******* 
ok: [haproxy] => {"backup": "", "changed": false, "found": 0, "msg": ""}
ok: [pg-standby-1] => {"backup": "", "changed": false, "found": 0, "msg": ""}
ok: [pg-standby-2] => {"backup": "", "changed": false, "found": 0, "msg": ""}
ok: [pg-primary] => {"backup": "", "changed": false, "found": 0, "msg": ""}

TASK [common : Configure sysctl for PostgreSQL] ********************************
Monday 15 December 2025  23:30:22 -0800 (0:00:00.655)       0:00:11.190 ******* 
skipping: [haproxy] => (item={'name': 'vm.swappiness', 'value': '1'})  => {"ansible_loop_var": "item", "changed": false, "false_condition": "'pg_cluster' in group_names", "item": {"name": "vm.swappiness", "value": "1"}, "skip_reason": "Conditional result was False"}
skipping: [haproxy] => (item={'name': 'vm.overcommit_memory', 'value': '2'})  => {"ansible_loop_var": "item", "changed": false, "false_condition": "'pg_cluster' in group_names", "item": {"name": "vm.overcommit_memory", "value": "2"}, "skip_reason": "Conditional result was False"}
skipping: [haproxy] => (item={'name': 'net.core.somaxconn', 'value': '65535'})  => {"ansible_loop_var": "item", "changed": false, "false_condition": "'pg_cluster' in group_names", "item": {"name": "net.core.somaxconn", "value": "65535"}, "skip_reason": "Conditional result was False"}
skipping: [haproxy] => (item={'name': 'net.ipv4.tcp_max_syn_backlog', 'value': '65535'})  => {"ansible_loop_var": "item", "changed": false, "false_condition": "'pg_cluster' in group_names", "item": {"name": "net.ipv4.tcp_max_syn_backlog", "value": "65535"}, "skip_reason": "Conditional result was False"}
[WARNING]: Deprecation warnings can be disabled by setting `deprecation_warnings=False` in ansible.cfg.
[DEPRECATION WARNING]: Importing 'to_native' from 'ansible.module_utils._text' is deprecated. This feature will be removed from ansible-core version 2.24. Use ansible.module_utils.common.text.converters instead.
skipping: [haproxy] => {"changed": false, "msg": "All items skipped"}
ok: [pg-standby-1] => (item={'name': 'vm.swappiness', 'value': '1'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "vm.swappiness", "value": "1"}}
ok: [pg-standby-2] => (item={'name': 'vm.swappiness', 'value': '1'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "vm.swappiness", "value": "1"}}
ok: [pg-primary] => (item={'name': 'vm.swappiness', 'value': '1'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "vm.swappiness", "value": "1"}}
ok: [pg-standby-2] => (item={'name': 'vm.overcommit_memory', 'value': '2'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "vm.overcommit_memory", "value": "2"}}
ok: [pg-standby-1] => (item={'name': 'vm.overcommit_memory', 'value': '2'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "vm.overcommit_memory", "value": "2"}}
ok: [pg-primary] => (item={'name': 'vm.overcommit_memory', 'value': '2'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "vm.overcommit_memory", "value": "2"}}
ok: [pg-standby-2] => (item={'name': 'net.core.somaxconn', 'value': '65535'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "net.core.somaxconn", "value": "65535"}}
ok: [pg-standby-1] => (item={'name': 'net.core.somaxconn', 'value': '65535'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "net.core.somaxconn", "value": "65535"}}
ok: [pg-primary] => (item={'name': 'net.core.somaxconn', 'value': '65535'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "net.core.somaxconn", "value": "65535"}}
ok: [pg-primary] => (item={'name': 'net.ipv4.tcp_max_syn_backlog', 'value': '65535'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "net.ipv4.tcp_max_syn_backlog", "value": "65535"}}
ok: [pg-standby-1] => (item={'name': 'net.ipv4.tcp_max_syn_backlog', 'value': '65535'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "net.ipv4.tcp_max_syn_backlog", "value": "65535"}}
ok: [pg-standby-2] => (item={'name': 'net.ipv4.tcp_max_syn_backlog', 'value': '65535'}) => {"ansible_loop_var": "item", "changed": false, "item": {"name": "net.ipv4.tcp_max_syn_backlog", "value": "65535"}}

PLAY [Install and configure PostgreSQL on cluster nodes] ***********************

TASK [postgresql : Add PostgreSQL APT repository key] **************************
Monday 15 December 2025  23:30:26 -0800 (0:00:03.671)       0:00:14.861 ******* 
ok: [pg-primary] => {"before": ["7FCC7D46ACCC4CF8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "7FCC7D46ACCC4CF8", "id": "7FCC7D46ACCC4CF8", "key_id": "7FCC7D46ACCC4CF8", "short_id": "ACCC4CF8"}
ok: [pg-standby-1] => {"before": ["7FCC7D46ACCC4CF8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "7FCC7D46ACCC4CF8", "id": "7FCC7D46ACCC4CF8", "key_id": "7FCC7D46ACCC4CF8", "short_id": "ACCC4CF8"}
ok: [pg-standby-2] => {"before": ["7FCC7D46ACCC4CF8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "7FCC7D46ACCC4CF8", "id": "7FCC7D46ACCC4CF8", "key_id": "7FCC7D46ACCC4CF8", "short_id": "ACCC4CF8"}

TASK [postgresql : Add PostgreSQL APT repository] ******************************
Monday 15 December 2025  23:30:27 -0800 (0:00:01.389)       0:00:16.251 ******* 
[DEPRECATION WARNING]: INJECT_FACTS_AS_VARS default to `True` is deprecated, top-level facts will not be auto injected after the change. This feature will be removed from ansible-core version 2.24.
Origin: /Users/geoffmontee/pg-ha-cluster/ansible/roles/postgresql/tasks/main.yml:10:11

 8 - name: Add PostgreSQL APT repository
 9   ansible.builtin.apt_repository:
10     repo: "deb http://apt.postgresql.org/pub/repos/apt {{ ansible_distribution_release }}-pgdg main"
             ^ column 11

Use `ansible_facts["fact_name"]` (no `ansible_` prefix) instead.

ok: [pg-standby-2] => {"changed": false, "repo": "deb http://apt.postgresql.org/pub/repos/apt jammy-pgdg main", "sources_added": [], "sources_removed": [], "state": "present"}
ok: [pg-standby-1] => {"changed": false, "repo": "deb http://apt.postgresql.org/pub/repos/apt jammy-pgdg main", "sources_added": [], "sources_removed": [], "state": "present"}
ok: [pg-primary] => {"changed": false, "repo": "deb http://apt.postgresql.org/pub/repos/apt jammy-pgdg main", "sources_added": [], "sources_removed": [], "state": "present"}

TASK [postgresql : Update apt cache after adding PostgreSQL repo] **************
Monday 15 December 2025  23:30:28 -0800 (0:00:00.953)       0:00:17.205 ******* 
changed: [pg-standby-1] => {"cache_update_time": 1765870230, "cache_updated": true, "changed": true}
changed: [pg-standby-2] => {"cache_update_time": 1765870230, "cache_updated": true, "changed": true}
changed: [pg-primary] => {"cache_update_time": 1765870230, "cache_updated": true, "changed": true}

TASK [postgresql : Install PostgreSQL 17] **************************************
Monday 15 December 2025  23:30:30 -0800 (0:00:02.573)       0:00:19.778 ******* 
ok: [pg-primary] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": false}
ok: [pg-standby-2] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": false}
ok: [pg-standby-1] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": false}

TASK [postgresql : Ensure PostgreSQL service is stopped for initial configuration] ***
Monday 15 December 2025  23:30:32 -0800 (0:00:01.718)       0:00:21.497 ******* 
changed: [pg-standby-2] => {"changed": true, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ActiveEnterTimestampMonotonic": "1540713730", "ActiveExitTimestamp": "Tue 2025-12-16 07:11:58 UTC", "ActiveExitTimestampMonotonic": "685437109", "ActiveState": "active", "After": "sysinit.target system.slice postgresql@17-main.service systemd-journald.socket basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:26:13 UTC", "AssertTimestampMonotonic": "1540706985", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1146000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ConditionTimestampMonotonic": "1540706983", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainExitTimestampMonotonic": "1540713419", "ExecMainPID": "8254", "ExecMainStartTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainStartTimestampMonotonic": "1540712115", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8254 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8254 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:11:58 UTC", "InactiveEnterTimestampMonotonic": "685437109", "InactiveExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "InactiveExitTimestampMonotonic": "1540712389", "InvocationID": "f43191e7eb224176a1f74cf789cd19e1", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:26:13 UTC", "StateChangeTimestampMonotonic": "1540713730", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-standby-1] => {"changed": true, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ActiveEnterTimestampMonotonic": "1542240811", "ActiveExitTimestamp": "Tue 2025-12-16 07:11:58 UTC", "ActiveExitTimestampMonotonic": "686977971", "ActiveState": "active", "After": "postgresql@17-main.service systemd-journald.socket basic.target sysinit.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:26:13 UTC", "AssertTimestampMonotonic": "1542234041", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1233000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ConditionTimestampMonotonic": "1542234039", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainExitTimestampMonotonic": "1542240490", "ExecMainPID": "8227", "ExecMainStartTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainStartTimestampMonotonic": "1542239139", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8227 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8227 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:11:58 UTC", "InactiveEnterTimestampMonotonic": "686977971", "InactiveExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "InactiveExitTimestampMonotonic": "1542239442", "InvocationID": "144b7c433ed5442894cd6c8360f8bb5e", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:26:13 UTC", "StateChangeTimestampMonotonic": "1542240811", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-primary] => {"changed": true, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ActiveEnterTimestampMonotonic": "1539891239", "ActiveExitTimestamp": "Tue 2025-12-16 07:11:58 UTC", "ActiveExitTimestampMonotonic": "684607284", "ActiveState": "active", "After": "sysinit.target basic.target systemd-journald.socket system.slice postgresql@17-main.service", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:26:13 UTC", "AssertTimestampMonotonic": "1539886103", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1555000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ConditionTimestampMonotonic": "1539886100", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainExitTimestampMonotonic": "1539890907", "ExecMainPID": "8339", "ExecMainStartTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainStartTimestampMonotonic": "1539889223", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8339 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8339 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:11:58 UTC", "InactiveEnterTimestampMonotonic": "684607284", "InactiveExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "InactiveExitTimestampMonotonic": "1539889796", "InvocationID": "cd47500899544c11a492210bd9f1403d", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:26:13 UTC", "StateChangeTimestampMonotonic": "1539891239", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [postgresql : Configure postgresql.conf] **********************************
Monday 15 December 2025  23:30:33 -0800 (0:00:00.943)       0:00:22.441 ******* 
changed: [pg-standby-1] => {"changed": true, "checksum": "715ff01c5ca3f853ba63a12b4afac365a538bcbb", "dest": "/etc/postgresql/17/main/postgresql.conf", "gid": 123, "group": "postgres", "md5sum": "661d14b3b882d226c8dfda9498408ed2", "mode": "0644", "owner": "postgres", "size": 2811, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870233.8523579-33482-210920643352413/.source.conf", "state": "file", "uid": 115}
changed: [pg-standby-2] => {"changed": true, "checksum": "715ff01c5ca3f853ba63a12b4afac365a538bcbb", "dest": "/etc/postgresql/17/main/postgresql.conf", "gid": 123, "group": "postgres", "md5sum": "661d14b3b882d226c8dfda9498408ed2", "mode": "0644", "owner": "postgres", "size": 2811, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870233.869807-33483-141635659757935/.source.conf", "state": "file", "uid": 115}
changed: [pg-primary] => {"changed": true, "checksum": "715ff01c5ca3f853ba63a12b4afac365a538bcbb", "dest": "/etc/postgresql/17/main/postgresql.conf", "gid": 123, "group": "postgres", "md5sum": "661d14b3b882d226c8dfda9498408ed2", "mode": "0644", "owner": "postgres", "size": 2811, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870233.919878-33481-6149311038323/.source.conf", "state": "file", "uid": 115}

TASK [postgresql : Configure pg_hba.conf] **************************************
Monday 15 December 2025  23:30:37 -0800 (0:00:03.752)       0:00:26.193 ******* 
ok: [pg-standby-1] => {"changed": false, "checksum": "27aee71d945608a240500aa5d8180fac8496dcb5", "dest": "/etc/postgresql/17/main/pg_hba.conf", "gid": 123, "group": "postgres", "mode": "0640", "owner": "postgres", "path": "/etc/postgresql/17/main/pg_hba.conf", "size": 1678, "state": "file", "uid": 115}
ok: [pg-standby-2] => {"changed": false, "checksum": "27aee71d945608a240500aa5d8180fac8496dcb5", "dest": "/etc/postgresql/17/main/pg_hba.conf", "gid": 123, "group": "postgres", "mode": "0640", "owner": "postgres", "path": "/etc/postgresql/17/main/pg_hba.conf", "size": 1678, "state": "file", "uid": 115}
ok: [pg-primary] => {"changed": false, "checksum": "27aee71d945608a240500aa5d8180fac8496dcb5", "dest": "/etc/postgresql/17/main/pg_hba.conf", "gid": 123, "group": "postgres", "mode": "0640", "owner": "postgres", "path": "/etc/postgresql/17/main/pg_hba.conf", "size": 1678, "state": "file", "uid": 115}

TASK [postgresql : Ensure PostgreSQL service is enabled and started] ***********
Monday 15 December 2025  23:30:39 -0800 (0:00:02.125)       0:00:28.319 ******* 
changed: [pg-standby-1] => {"changed": true, "enabled": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ActiveEnterTimestampMonotonic": "1542240811", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:33 UTC", "ActiveExitTimestampMonotonic": "1801953314", "ActiveState": "inactive", "After": "postgresql@17-main.service systemd-journald.socket basic.target sysinit.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:26:13 UTC", "AssertTimestampMonotonic": "1542234041", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1233000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ConditionTimestampMonotonic": "1542234039", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainExitTimestampMonotonic": "1542240490", "ExecMainPID": "8227", "ExecMainStartTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainStartTimestampMonotonic": "1542239139", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8227 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8227 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:33 UTC", "InactiveEnterTimestampMonotonic": "1801953314", "InactiveExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "InactiveExitTimestampMonotonic": "1542239442", "InvocationID": "144b7c433ed5442894cd6c8360f8bb5e", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:33 UTC", "StateChangeTimestampMonotonic": "1801953314", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-standby-2] => {"changed": true, "enabled": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ActiveEnterTimestampMonotonic": "1540713730", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:33 UTC", "ActiveExitTimestampMonotonic": "1800399106", "ActiveState": "inactive", "After": "sysinit.target system.slice postgresql@17-main.service systemd-journald.socket basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:26:13 UTC", "AssertTimestampMonotonic": "1540706985", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1146000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ConditionTimestampMonotonic": "1540706983", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainExitTimestampMonotonic": "1540713419", "ExecMainPID": "8254", "ExecMainStartTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainStartTimestampMonotonic": "1540712115", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8254 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8254 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:33 UTC", "InactiveEnterTimestampMonotonic": "1800399106", "InactiveExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "InactiveExitTimestampMonotonic": "1540712389", "InvocationID": "f43191e7eb224176a1f74cf789cd19e1", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:33 UTC", "StateChangeTimestampMonotonic": "1800399106", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-primary] => {"changed": true, "enabled": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ActiveEnterTimestampMonotonic": "1539891239", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:33 UTC", "ActiveExitTimestampMonotonic": "1799585538", "ActiveState": "inactive", "After": "sysinit.target basic.target systemd-journald.socket system.slice postgresql@17-main.service", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:26:13 UTC", "AssertTimestampMonotonic": "1539886103", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1555000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ConditionTimestampMonotonic": "1539886100", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainExitTimestampMonotonic": "1539890907", "ExecMainPID": "8339", "ExecMainStartTimestamp": "Tue 2025-12-16 07:26:13 UTC", "ExecMainStartTimestampMonotonic": "1539889223", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8339 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:26:13 UTC] ; stop_time=[Tue 2025-12-16 07:26:13 UTC] ; pid=8339 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:33 UTC", "InactiveEnterTimestampMonotonic": "1799585538", "InactiveExitTimestamp": "Tue 2025-12-16 07:26:13 UTC", "InactiveExitTimestampMonotonic": "1539889796", "InvocationID": "cd47500899544c11a492210bd9f1403d", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:33 UTC", "StateChangeTimestampMonotonic": "1799585538", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [postgresql : Wait for PostgreSQL to be ready] ****************************
Monday 15 December 2025  23:30:42 -0800 (0:00:03.027)       0:00:31.346 ******* 
ok: [pg-standby-2] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 5432, "search_regex": null, "state": "started"}
ok: [pg-primary] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 5432, "search_regex": null, "state": "started"}
ok: [pg-standby-1] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 5432, "search_regex": null, "state": "started"}

TASK [postgresql : Set postgres user password] *********************************
Monday 15 December 2025  23:30:43 -0800 (0:00:00.853)       0:00:32.200 ******* 
skipping: [pg-standby-1] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
skipping: [pg-standby-2] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
ok: [pg-primary] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}

TASK [postgresql : Create repmgr user] *****************************************
Monday 15 December 2025  23:30:44 -0800 (0:00:00.668)       0:00:32.868 ******* 
[WARNING]: Module remote_tmp /var/lib/postgresql/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually
skipping: [pg-standby-1] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}
skipping: [pg-standby-2] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}
changed: [pg-primary] => {"changed": true, "queries": ["CREATE USER \"repmgr\" WITH ENCRYPTED PASSWORD %(********)s REPLICATION SUPERUSER"], "user": "repmgr"}

TASK [postgresql : Create repmgr database] *************************************
Monday 15 December 2025  23:30:44 -0800 (0:00:00.826)       0:00:33.695 ******* 
skipping: [pg-standby-1] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}
skipping: [pg-standby-2] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}
changed: [pg-primary] => {"changed": true, "db": "repmgr", "executed_commands": ["CREATE DATABASE \"repmgr\" OWNER \"repmgr\""]}

TASK [postgresql : Grant repmgr extension privileges] **************************
Monday 15 December 2025  23:30:45 -0800 (0:00:00.784)       0:00:34.479 ******* 
skipping: [pg-standby-1] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}
skipping: [pg-standby-2] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}
[ERROR]: Task failed: Module failed: non-zero return code
Origin: /Users/geoffmontee/pg-ha-cluster/ansible/roles/postgresql/tasks/main.yml:95:3

93   when: inventory_hostname in groups['pg_primary']
94
95 - name: Grant repmgr extension privileges
     ^ column 3

fatal: [pg-primary]: FAILED! => {"changed": false, "cmd": ["sudo", "-u", "postgres", "psql", "-d", "repmgr", "-c", "CREATE EXTENSION IF NOT EXISTS repmgr;"], "delta": "0:00:00.050711", "end": "2025-12-16 07:30:46.303303", "msg": "non-zero return code", "rc": 1, "start": "2025-12-16 07:30:46.252592", "stderr": "ERROR:  extension \"repmgr\" is not available\nDETAIL:  Could not open extension control file \"/usr/share/postgresql/17/extension/repmgr.control\": No such file or directory.\nHINT:  The extension must first be installed on the system where PostgreSQL is running.", "stderr_lines": ["ERROR:  extension \"repmgr\" is not available", "DETAIL:  Could not open extension control file \"/usr/share/postgresql/17/extension/repmgr.control\": No such file or directory.", "HINT:  The extension must first be installed on the system where PostgreSQL is running."], "stdout": "", "stdout_lines": []}
...ignoring

RUNNING HANDLER [postgresql : Restart PostgreSQL] ******************************
Monday 15 December 2025  23:30:46 -0800 (0:00:00.708)       0:00:35.188 ******* 
changed: [pg-standby-1] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ActiveEnterTimestampMonotonic": "1810845284", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:33 UTC", "ActiveExitTimestampMonotonic": "1801953314", "ActiveState": "active", "After": "postgresql@17-main.service systemd-journald.socket basic.target sysinit.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:42 UTC", "AssertTimestampMonotonic": "1810838191", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1600000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ConditionTimestampMonotonic": "1810838188", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ExecMainExitTimestampMonotonic": "1810844936", "ExecMainPID": "9215", "ExecMainStartTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ExecMainStartTimestampMonotonic": "1810843148", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:30:42 UTC] ; stop_time=[Tue 2025-12-16 07:30:42 UTC] ; pid=9215 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:30:42 UTC] ; stop_time=[Tue 2025-12-16 07:30:42 UTC] ; pid=9215 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:33 UTC", "InactiveEnterTimestampMonotonic": "1801953314", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:42 UTC", "InactiveExitTimestampMonotonic": "1810843598", "InvocationID": "4fd235e1d8734ee497aaef59893adbea", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:42 UTC", "StateChangeTimestampMonotonic": "1810845284", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-standby-2] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ActiveEnterTimestampMonotonic": "1809295632", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:33 UTC", "ActiveExitTimestampMonotonic": "1800399106", "ActiveState": "active", "After": "sysinit.target system.slice postgresql@17-main.service systemd-journald.socket basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:42 UTC", "AssertTimestampMonotonic": "1809289443", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1100000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ConditionTimestampMonotonic": "1809289442", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ExecMainExitTimestampMonotonic": "1809295311", "ExecMainPID": "9240", "ExecMainStartTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ExecMainStartTimestampMonotonic": "1809294085", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:30:42 UTC] ; stop_time=[Tue 2025-12-16 07:30:42 UTC] ; pid=9240 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:30:42 UTC] ; stop_time=[Tue 2025-12-16 07:30:42 UTC] ; pid=9240 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:33 UTC", "InactiveEnterTimestampMonotonic": "1800399106", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:42 UTC", "InactiveExitTimestampMonotonic": "1809294347", "InvocationID": "e97f526e47d949bda48d8bf00a84ef01", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:42 UTC", "StateChangeTimestampMonotonic": "1809295632", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-primary] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ActiveEnterTimestampMonotonic": "1808502830", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:33 UTC", "ActiveExitTimestampMonotonic": "1799585538", "ActiveState": "active", "After": "sysinit.target basic.target systemd-journald.socket system.slice postgresql@17-main.service", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:42 UTC", "AssertTimestampMonotonic": "1808497416", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1138000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ConditionTimestampMonotonic": "1808497414", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ExecMainExitTimestampMonotonic": "1808502496", "ExecMainPID": "9407", "ExecMainStartTimestamp": "Tue 2025-12-16 07:30:42 UTC", "ExecMainStartTimestampMonotonic": "1808501202", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:30:42 UTC] ; stop_time=[Tue 2025-12-16 07:30:42 UTC] ; pid=9407 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:30:42 UTC] ; stop_time=[Tue 2025-12-16 07:30:42 UTC] ; pid=9407 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:33 UTC", "InactiveEnterTimestampMonotonic": "1799585538", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:42 UTC", "InactiveExitTimestampMonotonic": "1808501491", "InvocationID": "7e63685e44c948ee81c334809bf8481b", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:42 UTC", "StateChangeTimestampMonotonic": "1808502830", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

PLAY [Configure repmgr for high availability] **********************************

TASK [repmgr : Install repmgr for PostgreSQL 17] *******************************
Monday 15 December 2025  23:30:49 -0800 (0:00:03.565)       0:00:38.753 ******* 
changed: [pg-primary] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  repmgr-common\nThe following NEW packages will be installed:\n  postgresql-17-repmgr repmgr-common\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 432 kB of archives.\nAfter this operation, 1285 kB of additional disk space will be used.\nGet:1 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 repmgr-common all 5.5.0+debpgdg-3.pgdg22.04+1 [190 kB]\nGet:2 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 postgresql-17-repmgr amd64 5.5.0+debpgdg-3.pgdg22.04+1 [242 kB]\nFetched 432 kB in 0s (1015 kB/s)\nSelecting previously unselected package repmgr-common.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75223 files and directories currently installed.)\r\nPreparing to unpack .../repmgr-common_5.5.0+debpgdg-3.pgdg22.04+1_all.deb ...\r\nUnpacking repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSelecting previously unselected package postgresql-17-repmgr.\r\nPreparing to unpack .../postgresql-17-repmgr_5.5.0+debpgdg-3.pgdg22.04+1_amd64.deb ...\r\nUnpacking postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSetting up repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSetting up postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nProcessing triggers for postgresql-common (287.pgdg22.04+1) ...\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\n\nRunning kernel seems to be up-to-date.\n\nNo services need to be restarted.\n\nNo containers need to be restarted.\n\nNo user sessions are running outdated binaries.\n\nNo VM guests are running outdated hypervisor (qemu) binaries on this host.\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  repmgr-common", "The following NEW packages will be installed:", "  postgresql-17-repmgr repmgr-common", "0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.", "Need to get 432 kB of archives.", "After this operation, 1285 kB of additional disk space will be used.", "Get:1 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 repmgr-common all 5.5.0+debpgdg-3.pgdg22.04+1 [190 kB]", "Get:2 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 postgresql-17-repmgr amd64 5.5.0+debpgdg-3.pgdg22.04+1 [242 kB]", "Fetched 432 kB in 0s (1015 kB/s)", "Selecting previously unselected package repmgr-common.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75223 files and directories currently installed.)", "Preparing to unpack .../repmgr-common_5.5.0+debpgdg-3.pgdg22.04+1_all.deb ...", "Unpacking repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Selecting previously unselected package postgresql-17-repmgr.", "Preparing to unpack .../postgresql-17-repmgr_5.5.0+debpgdg-3.pgdg22.04+1_amd64.deb ...", "Unpacking postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Setting up repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Setting up postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Processing triggers for postgresql-common (287.pgdg22.04+1) ...", "Building PostgreSQL dictionaries from installed myspell/hunspell packages...", "Removing obsolete dictionary files:", "", "Running kernel seems to be up-to-date.", "", "No services need to be restarted.", "", "No containers need to be restarted.", "", "No user sessions are running outdated binaries.", "", "No VM guests are running outdated hypervisor (qemu) binaries on this host."]}

TASK [repmgr : Enable repmgr in shared_preload_libraries] **********************
Monday 15 December 2025  23:30:55 -0800 (0:00:06.025)       0:00:44.779 ******* 
changed: [pg-primary] => {"backup": "", "changed": true, "msg": "line replaced"}

TASK [repmgr : Flush handlers to restart PostgreSQL with repmgr loaded] ********
Monday 15 December 2025  23:30:56 -0800 (0:00:00.894)       0:00:45.673 ******* 

RUNNING HANDLER [repmgr : Restart PostgreSQL] **********************************
Monday 15 December 2025  23:30:56 -0800 (0:00:00.003)       0:00:45.677 ******* 
changed: [pg-primary] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ActiveEnterTimestampMonotonic": "1815894267", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:47 UTC", "ActiveExitTimestampMonotonic": "1813440538", "ActiveState": "active", "After": "basic.target sysinit.target systemd-journald.socket postgresql@17-main.service system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:49 UTC", "AssertTimestampMonotonic": "1815886751", "Before": "multi-user.target repmgrd.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1678000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ConditionTimestampMonotonic": "1815886748", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ExecMainExitTimestampMonotonic": "1815893886", "ExecMainPID": "9480", "ExecMainStartTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ExecMainStartTimestampMonotonic": "1815892165", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:47 UTC", "InactiveEnterTimestampMonotonic": "1813440538", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:49 UTC", "InactiveExitTimestampMonotonic": "1815892583", "InvocationID": "22df482748e042b998bce4b08b97988e", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:49 UTC", "StateChangeTimestampMonotonic": "1815894267", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Create repmgr config directory] *********************************
Monday 15 December 2025  23:31:00 -0800 (0:00:03.286)       0:00:48.964 ******* 
changed: [pg-primary] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/etc/repmgr", "size": 4096, "state": "directory", "uid": 115}

TASK [repmgr : Create repmgr log directory] ************************************
Monday 15 December 2025  23:31:00 -0800 (0:00:00.620)       0:00:49.585 ******* 
changed: [pg-primary] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/var/log/repmgr", "size": 4096, "state": "directory", "uid": 115}

TASK [repmgr : Configure repmgr.conf] ******************************************
Monday 15 December 2025  23:31:01 -0800 (0:00:00.616)       0:00:50.202 ******* 
changed: [pg-primary] => {"changed": true, "checksum": "e809b22ea1cb64195d5fff8a53817619914819a9", "dest": "/etc/repmgr.conf", "gid": 123, "group": "postgres", "md5sum": "71d7f37a98ee6f4b69107a04363c5b2e", "mode": "0644", "owner": "postgres", "size": 3256, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870261.640251-33628-272666998031508/.source.conf", "state": "file", "uid": 115}

TASK [repmgr : Create .pgpass file for postgres user] **************************
Monday 15 December 2025  23:31:07 -0800 (0:00:06.068)       0:00:56.270 ******* 
changed: [pg-primary] => {"changed": true, "checksum": "22396b3e0ba326b410cb2ac2f8dd8680367c012d", "dest": "/var/lib/postgresql/.pgpass", "gid": 123, "group": "postgres", "md5sum": "bb0d8a710ed2d0e3c7186cea263f9761", "mode": "0600", "owner": "postgres", "size": 526, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870267.750647-33647-71071205542691/.source", "state": "file", "uid": 115}

TASK [repmgr : Configure repmgrd systemd service] ******************************
Monday 15 December 2025  23:31:12 -0800 (0:00:04.962)       0:01:01.233 ******* 
changed: [pg-primary] => {"changed": true, "checksum": "f3d617d601a730829406362cc942cb8fe75dc0c5", "dest": "/etc/systemd/system/repmgrd.service", "gid": 0, "group": "root", "md5sum": "ab12c5c3cc42f20899338b12949b84bc", "mode": "0644", "owner": "root", "size": 563, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870272.7103481-33667-154852330616963/.source.service", "state": "file", "uid": 0}

TASK [repmgr : Register primary node] ******************************************
Monday 15 December 2025  23:31:16 -0800 (0:00:04.334)       0:01:05.567 ******* 
ok: [pg-primary] => {"changed": false, "cmd": ["sudo", "-u", "postgres", "repmgr", "-f", "/etc/repmgr.conf", "primary", "register", "--force"], "delta": "0:00:00.088379", "end": "2025-12-16 07:31:17.644382", "failed_when_result": false, "msg": "", "rc": 0, "start": "2025-12-16 07:31:17.556003", "stderr": "INFO: connecting to primary database...\nNOTICE: attempting to install extension \"repmgr\"\nNOTICE: \"repmgr\" extension successfully installed\nNOTICE: primary node record (ID: 1) registered", "stderr_lines": ["INFO: connecting to primary database...", "NOTICE: attempting to install extension \"repmgr\"", "NOTICE: \"repmgr\" extension successfully installed", "NOTICE: primary node record (ID: 1) registered"], "stdout": "", "stdout_lines": []}

TASK [repmgr : Stop PostgreSQL on standby nodes for cloning] *******************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.955)       0:01:06.522 ******* 
skipping: [pg-primary] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_standby']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Remove existing data directory on standby] **********************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.019)       0:01:06.542 ******* 
skipping: [pg-primary] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_standby']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Clone standby from primary] *************************************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.012)       0:01:06.554 ******* 
skipping: [pg-primary] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_standby']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Start PostgreSQL on standby nodes] ******************************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.010)       0:01:06.565 ******* 
skipping: [pg-primary] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_standby']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Wait for PostgreSQL to be ready on standby] *********************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.009)       0:01:06.575 ******* 
skipping: [pg-primary] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_standby']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Register standby nodes] *****************************************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.009)       0:01:06.584 ******* 
skipping: [pg-primary] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_standby']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Enable and start repmgrd service] *******************************
Monday 15 December 2025  23:31:17 -0800 (0:00:00.010)       0:01:06.595 ******* 
changed: [pg-primary] => {"changed": true, "enabled": true, "name": "repmgrd", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:53 UTC", "ActiveEnterTimestampMonotonic": "1819157274", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target -.mount systemd-journald.socket basic.target postgresql.service system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:53 UTC", "AssertTimestampMonotonic": "1819149440", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1502000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanClean": "runtime", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:53 UTC", "ConditionTimestampMonotonic": "1819149437", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "repmgr daemon", "DevicePolicy": "auto", "Documentation": "https://repmgr.org", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/repmgrd ; argv[]=/usr/bin/repmgrd -f /etc/repmgr.conf --pid-file=/var/run/repmgr/repmgrd.pid ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/repmgrd ; argv[]=/usr/bin/repmgrd -f /etc/repmgr.conf --pid-file=/var/run/repmgr/repmgrd.pid ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/repmgrd.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "repmgrd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:53 UTC", "InactiveExitTimestampMonotonic": "1819155437", "InvocationID": "16842eaa39b34dd5866cbd52c0bfc0b2", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "repmgrd.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "PIDFile": "/run/repmgr/repmgrd.pid", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "ReadWritePaths": "/var/log/repmgr /var/run/repmgr", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target -.mount postgresql.service system.slice", "RequiresMountsFor": "/run/repmgr", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectory": "repmgr", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:53 UTC", "StateChangeTimestampMonotonic": "1819157274", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "postgres", "UtmpMode": "init", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Verify cluster status] ******************************************
Monday 15 December 2025  23:31:19 -0800 (0:00:02.155)       0:01:08.750 ******* 
ok: [pg-primary] => {"changed": false, "cmd": ["sudo", "-u", "postgres", "repmgr", "-f", "/etc/repmgr.conf", "cluster", "show"], "delta": "0:00:00.080458", "end": "2025-12-16 07:31:20.774017", "msg": "", "rc": 0, "start": "2025-12-16 07:31:20.693559", "stderr": "", "stderr_lines": [], "stdout": " ID | Name       | Role    | Status    | Upstream | Location | Priority | Timeline | Connection string                                          \n----+------------+---------+-----------+----------+----------+----------+----------+-------------------------------------------------------------\n 1  | pg-primary | primary | * running |          | default  | 100      | 1        | host=10.0.1.105 user=repmgr dbname=repmgr connect_timeout=2", "stdout_lines": [" ID | Name       | Role    | Status    | Upstream | Location | Priority | Timeline | Connection string                                          ", "----+------------+---------+-----------+----------+----------+----------+----------+-------------------------------------------------------------", " 1  | pg-primary | primary | * running |          | default  | 100      | 1        | host=10.0.1.105 user=repmgr dbname=repmgr connect_timeout=2"]}

TASK [repmgr : Display cluster status] *****************************************
Monday 15 December 2025  23:31:20 -0800 (0:00:00.869)       0:01:09.620 ******* 
ok: [pg-primary] => {
    "cluster_status.stdout_lines": [
        " ID | Name       | Role    | Status    | Upstream | Location | Priority | Timeline | Connection string                                          ",
        "----+------------+---------+-----------+----------+----------+----------+----------+-------------------------------------------------------------",
        " 1  | pg-primary | primary | * running |          | default  | 100      | 1        | host=10.0.1.105 user=repmgr dbname=repmgr connect_timeout=2"
    ]
}

RUNNING HANDLER [repmgr : Reload systemd] **************************************
Monday 15 December 2025  23:31:20 -0800 (0:00:00.026)       0:01:09.646 ******* 
ok: [pg-primary] => {"changed": false, "name": null, "status": {}}

PLAY [Configure repmgr for high availability] **********************************

TASK [repmgr : Install repmgr for PostgreSQL 17] *******************************
Monday 15 December 2025  23:31:22 -0800 (0:00:01.432)       0:01:11.079 ******* 
changed: [pg-standby-1] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  repmgr-common\nThe following NEW packages will be installed:\n  postgresql-17-repmgr repmgr-common\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 432 kB of archives.\nAfter this operation, 1285 kB of additional disk space will be used.\nGet:1 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 repmgr-common all 5.5.0+debpgdg-3.pgdg22.04+1 [190 kB]\nGet:2 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 postgresql-17-repmgr amd64 5.5.0+debpgdg-3.pgdg22.04+1 [242 kB]\nFetched 432 kB in 0s (23.4 MB/s)\nSelecting previously unselected package repmgr-common.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75223 files and directories currently installed.)\r\nPreparing to unpack .../repmgr-common_5.5.0+debpgdg-3.pgdg22.04+1_all.deb ...\r\nUnpacking repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSelecting previously unselected package postgresql-17-repmgr.\r\nPreparing to unpack .../postgresql-17-repmgr_5.5.0+debpgdg-3.pgdg22.04+1_amd64.deb ...\r\nUnpacking postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSetting up repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSetting up postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nProcessing triggers for postgresql-common (287.pgdg22.04+1) ...\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\n\nRunning kernel seems to be up-to-date.\n\nNo services need to be restarted.\n\nNo containers need to be restarted.\n\nNo user sessions are running outdated binaries.\n\nNo VM guests are running outdated hypervisor (qemu) binaries on this host.\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  repmgr-common", "The following NEW packages will be installed:", "  postgresql-17-repmgr repmgr-common", "0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.", "Need to get 432 kB of archives.", "After this operation, 1285 kB of additional disk space will be used.", "Get:1 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 repmgr-common all 5.5.0+debpgdg-3.pgdg22.04+1 [190 kB]", "Get:2 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 postgresql-17-repmgr amd64 5.5.0+debpgdg-3.pgdg22.04+1 [242 kB]", "Fetched 432 kB in 0s (23.4 MB/s)", "Selecting previously unselected package repmgr-common.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75223 files and directories currently installed.)", "Preparing to unpack .../repmgr-common_5.5.0+debpgdg-3.pgdg22.04+1_all.deb ...", "Unpacking repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Selecting previously unselected package postgresql-17-repmgr.", "Preparing to unpack .../postgresql-17-repmgr_5.5.0+debpgdg-3.pgdg22.04+1_amd64.deb ...", "Unpacking postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Setting up repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Setting up postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Processing triggers for postgresql-common (287.pgdg22.04+1) ...", "Building PostgreSQL dictionaries from installed myspell/hunspell packages...", "Removing obsolete dictionary files:", "", "Running kernel seems to be up-to-date.", "", "No services need to be restarted.", "", "No containers need to be restarted.", "", "No user sessions are running outdated binaries.", "", "No VM guests are running outdated hypervisor (qemu) binaries on this host."]}

TASK [repmgr : Enable repmgr in shared_preload_libraries] **********************
Monday 15 December 2025  23:31:27 -0800 (0:00:05.639)       0:01:16.718 ******* 
changed: [pg-standby-1] => {"backup": "", "changed": true, "msg": "line replaced"}

TASK [repmgr : Flush handlers to restart PostgreSQL with repmgr loaded] ********
Monday 15 December 2025  23:31:28 -0800 (0:00:00.606)       0:01:17.325 ******* 

RUNNING HANDLER [repmgr : Restart PostgreSQL] **********************************
Monday 15 December 2025  23:31:28 -0800 (0:00:00.004)       0:01:17.329 ******* 
changed: [pg-standby-1] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ActiveEnterTimestampMonotonic": "1817838239", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:47 UTC", "ActiveExitTimestampMonotonic": "1815486822", "ActiveState": "active", "After": "sysinit.target basic.target system.slice postgresql@17-main.service systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:49 UTC", "AssertTimestampMonotonic": "1817831544", "Before": "repmgrd.service multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1638000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ConditionTimestampMonotonic": "1817831542", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ExecMainExitTimestampMonotonic": "1817837893", "ExecMainPID": "9261", "ExecMainStartTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ExecMainStartTimestampMonotonic": "1817836112", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:47 UTC", "InactiveEnterTimestampMonotonic": "1815486822", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:49 UTC", "InactiveExitTimestampMonotonic": "1817836503", "InvocationID": "a9155d9f95844c4788c3e2b1293f040b", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:49 UTC", "StateChangeTimestampMonotonic": "1817838239", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Create repmgr config directory] *********************************
Monday 15 December 2025  23:31:31 -0800 (0:00:03.102)       0:01:20.431 ******* 
changed: [pg-standby-1] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/etc/repmgr", "size": 4096, "state": "directory", "uid": 115}

TASK [repmgr : Create repmgr log directory] ************************************
Monday 15 December 2025  23:31:32 -0800 (0:00:00.601)       0:01:21.032 ******* 
changed: [pg-standby-1] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/var/log/repmgr", "size": 4096, "state": "directory", "uid": 115}

TASK [repmgr : Configure repmgr.conf] ******************************************
Monday 15 December 2025  23:31:32 -0800 (0:00:00.650)       0:01:21.682 ******* 
changed: [pg-standby-1] => {"changed": true, "checksum": "2554c5f708ab59752e74433713ab1b15abb69dc7", "dest": "/etc/repmgr.conf", "gid": 123, "group": "postgres", "md5sum": "96b71591c18226c113f1517fcaf3fff3", "mode": "0644", "owner": "postgres", "size": 3277, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870293.108609-33743-163267116918127/.source.conf", "state": "file", "uid": 115}

TASK [repmgr : Create .pgpass file for postgres user] **************************
Monday 15 December 2025  23:31:36 -0800 (0:00:03.726)       0:01:25.409 ******* 
changed: [pg-standby-1] => {"changed": true, "checksum": "22396b3e0ba326b410cb2ac2f8dd8680367c012d", "dest": "/var/lib/postgresql/.pgpass", "gid": 123, "group": "postgres", "md5sum": "bb0d8a710ed2d0e3c7186cea263f9761", "mode": "0600", "owner": "postgres", "size": 526, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870296.873365-33762-233055241480860/.source", "state": "file", "uid": 115}

TASK [repmgr : Configure repmgrd systemd service] ******************************
Monday 15 December 2025  23:31:39 -0800 (0:00:03.321)       0:01:28.730 ******* 
changed: [pg-standby-1] => {"changed": true, "checksum": "f3d617d601a730829406362cc942cb8fe75dc0c5", "dest": "/etc/systemd/system/repmgrd.service", "gid": 0, "group": "root", "md5sum": "ab12c5c3cc42f20899338b12949b84bc", "mode": "0644", "owner": "root", "size": 563, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870300.1986198-33781-203342238357208/.source.service", "state": "file", "uid": 0}

TASK [repmgr : Register primary node] ******************************************
Monday 15 December 2025  23:31:43 -0800 (0:00:03.300)       0:01:32.031 ******* 
skipping: [pg-standby-1] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Stop PostgreSQL on standby nodes for cloning] *******************
Monday 15 December 2025  23:31:43 -0800 (0:00:00.021)       0:01:32.052 ******* 
changed: [pg-standby-1] => {"changed": true, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ActiveEnterTimestampMonotonic": "1859997312", "ActiveExitTimestamp": "Tue 2025-12-16 07:31:29 UTC", "ActiveExitTimestampMonotonic": "1857640712", "ActiveState": "active", "After": "sysinit.target basic.target system.slice postgresql@17-main.service systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:31:31 UTC", "AssertTimestampMonotonic": "1859990650", "Before": "repmgrd.service multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1192000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ConditionTimestampMonotonic": "1859990648", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ExecMainExitTimestampMonotonic": "1859996727", "ExecMainPID": "9455", "ExecMainStartTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ExecMainStartTimestampMonotonic": "1859995127", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:31:31 UTC] ; stop_time=[Tue 2025-12-16 07:31:31 UTC] ; pid=9455 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:31:31 UTC] ; stop_time=[Tue 2025-12-16 07:31:31 UTC] ; pid=9455 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:31:29 UTC", "InactiveEnterTimestampMonotonic": "1857640712", "InactiveExitTimestamp": "Tue 2025-12-16 07:31:31 UTC", "InactiveExitTimestampMonotonic": "1859995419", "InvocationID": "5d14c1f237b4418e8016431facd288c3", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:31:31 UTC", "StateChangeTimestampMonotonic": "1859997312", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Remove existing data directory on standby] **********************
Monday 15 December 2025  23:31:44 -0800 (0:00:00.834)       0:01:32.887 ******* 
changed: [pg-standby-1] => {"changed": true, "path": "/var/lib/postgresql/17/main", "state": "absent"}

TASK [repmgr : Clone standby from primary] *************************************
Monday 15 December 2025  23:31:44 -0800 (0:00:00.704)       0:01:33.592 ******* 
changed: [pg-standby-1] => {"changed": true, "cmd": ["sudo", "-u", "postgres", "repmgr", "-h", "10.0.1.105", "-U", "repmgr", "-d", "repmgr", "-f", "/etc/repmgr.conf", "standby", "clone", "--fast-checkpoint"], "delta": "0:00:00.520917", "end": "2025-12-16 07:31:45.874208", "msg": "", "rc": 0, "start": "2025-12-16 07:31:45.353291", "stderr": "WARNING: the following problems were found in the configuration file:\n  upstream_node_id='1': unknown name/value pair provided; ignoring\nNOTICE: destination directory \"/var/lib/postgresql/17/main\" provided\nINFO: connecting to source node\nDETAIL: connection string is: host=10.0.1.105 user=repmgr dbname=repmgr\nDETAIL: current installation size is 29 MB\nNOTICE: checking for available walsenders on the source node (2 required)\nNOTICE: checking replication connections can be made to the source server (2 required)\nINFO: creating directory \"/var/lib/postgresql/17/main\"...\nNOTICE: starting backup (using pg_basebackup)...\nINFO: executing:\n  /usr/lib/postgresql/17/bin/pg_basebackup -l \"repmgr base backup\"  -D /var/lib/postgresql/17/main -h 10.0.1.105 -p 5432 -U repmgr -c fast -X stream -S repmgr_slot_2 \nNOTICE: standby clone (using pg_basebackup) complete\nNOTICE: you can now start your PostgreSQL server\nHINT: for example: sudo systemctl start postgresql\nHINT: after starting the server, you need to register this standby with \"repmgr standby register\"", "stderr_lines": ["WARNING: the following problems were found in the configuration file:", "  upstream_node_id='1': unknown name/value pair provided; ignoring", "NOTICE: destination directory \"/var/lib/postgresql/17/main\" provided", "INFO: connecting to source node", "DETAIL: connection string is: host=10.0.1.105 user=repmgr dbname=repmgr", "DETAIL: current installation size is 29 MB", "NOTICE: checking for available walsenders on the source node (2 required)", "NOTICE: checking replication connections can be made to the source server (2 required)", "INFO: creating directory \"/var/lib/postgresql/17/main\"...", "NOTICE: starting backup (using pg_basebackup)...", "INFO: executing:", "  /usr/lib/postgresql/17/bin/pg_basebackup -l \"repmgr base backup\"  -D /var/lib/postgresql/17/main -h 10.0.1.105 -p 5432 -U repmgr -c fast -X stream -S repmgr_slot_2 ", "NOTICE: standby clone (using pg_basebackup) complete", "NOTICE: you can now start your PostgreSQL server", "HINT: for example: sudo systemctl start postgresql", "HINT: after starting the server, you need to register this standby with \"repmgr standby register\""], "stdout": "", "stdout_lines": []}

TASK [repmgr : Start PostgreSQL on standby nodes] ******************************
Monday 15 December 2025  23:31:45 -0800 (0:00:01.122)       0:01:34.714 ******* 
changed: [pg-standby-1] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ActiveEnterTimestampMonotonic": "1859997312", "ActiveExitTimestamp": "Tue 2025-12-16 07:31:43 UTC", "ActiveExitTimestampMonotonic": "1872379767", "ActiveState": "inactive", "After": "sysinit.target basic.target system.slice postgresql@17-main.service systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:31:31 UTC", "AssertTimestampMonotonic": "1859990650", "Before": "repmgrd.service multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1192000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ConditionTimestampMonotonic": "1859990648", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ExecMainExitTimestampMonotonic": "1859996727", "ExecMainPID": "9455", "ExecMainStartTimestamp": "Tue 2025-12-16 07:31:31 UTC", "ExecMainStartTimestampMonotonic": "1859995127", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:31:31 UTC] ; stop_time=[Tue 2025-12-16 07:31:31 UTC] ; pid=9455 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:31:31 UTC] ; stop_time=[Tue 2025-12-16 07:31:31 UTC] ; pid=9455 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:31:43 UTC", "InactiveEnterTimestampMonotonic": "1872379767", "InactiveExitTimestamp": "Tue 2025-12-16 07:31:31 UTC", "InactiveExitTimestampMonotonic": "1859995419", "InvocationID": "5d14c1f237b4418e8016431facd288c3", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:31:43 UTC", "StateChangeTimestampMonotonic": "1872379767", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Wait for PostgreSQL to be ready on standby] *********************
Monday 15 December 2025  23:31:48 -0800 (0:00:02.985)       0:01:37.699 ******* 
ok: [pg-standby-1] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 5432, "search_regex": null, "state": "started"}

TASK [repmgr : Register standby nodes] *****************************************
Monday 15 December 2025  23:31:49 -0800 (0:00:00.827)       0:01:38.526 ******* 
ok: [pg-standby-1] => {"changed": false, "cmd": ["sudo", "-u", "postgres", "repmgr", "-f", "/etc/repmgr.conf", "standby", "register", "--force"], "delta": "0:00:00.089459", "end": "2025-12-16 07:31:50.371974", "failed_when_result": false, "msg": "", "rc": 0, "start": "2025-12-16 07:31:50.282515", "stderr": "WARNING: the following problems were found in the configuration file:\n  upstream_node_id='1': unknown name/value pair provided; ignoring\nINFO: connecting to local node \"pg-standby-1\" (ID: 2)\nINFO: connecting to primary database\nWARNING: --upstream-node-id not supplied, assuming upstream node is primary (node ID: 1)\nINFO: standby registration complete\nNOTICE: standby node \"pg-standby-1\" (ID: 2) successfully registered", "stderr_lines": ["WARNING: the following problems were found in the configuration file:", "  upstream_node_id='1': unknown name/value pair provided; ignoring", "INFO: connecting to local node \"pg-standby-1\" (ID: 2)", "INFO: connecting to primary database", "WARNING: --upstream-node-id not supplied, assuming upstream node is primary (node ID: 1)", "INFO: standby registration complete", "NOTICE: standby node \"pg-standby-1\" (ID: 2) successfully registered"], "stdout": "", "stdout_lines": []}

TASK [repmgr : Enable and start repmgrd service] *******************************
Monday 15 December 2025  23:31:50 -0800 (0:00:00.686)       0:01:39.213 ******* 
changed: [pg-standby-1] => {"changed": true, "enabled": true, "name": "repmgrd", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:31:25 UTC", "ActiveEnterTimestampMonotonic": "1853617220", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target system.slice postgresql.service basic.target -.mount systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:31:25 UTC", "AssertTimestampMonotonic": "1853610289", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1296000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanClean": "runtime", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:31:25 UTC", "ConditionTimestampMonotonic": "1853610287", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "repmgr daemon", "DevicePolicy": "auto", "Documentation": "https://repmgr.org", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/repmgrd ; argv[]=/usr/bin/repmgrd -f /etc/repmgr.conf --pid-file=/var/run/repmgr/repmgrd.pid ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/repmgrd ; argv[]=/usr/bin/repmgrd -f /etc/repmgr.conf --pid-file=/var/run/repmgr/repmgrd.pid ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/repmgrd.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "repmgrd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:31:25 UTC", "InactiveExitTimestampMonotonic": "1853615364", "InvocationID": "5b54ef435b8e42fab0b16eeb0b4b33e6", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "repmgrd.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "PIDFile": "/run/repmgr/repmgrd.pid", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "ReadWritePaths": "/var/log/repmgr /var/run/repmgr", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice postgresql.service -.mount sysinit.target", "RequiresMountsFor": "/run/repmgr", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectory": "repmgr", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:31:25 UTC", "StateChangeTimestampMonotonic": "1853617220", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "postgres", "UtmpMode": "init", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Verify cluster status] ******************************************
Monday 15 December 2025  23:31:52 -0800 (0:00:01.771)       0:01:40.985 ******* 
skipping: [pg-standby-1] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Display cluster status] *****************************************
Monday 15 December 2025  23:31:52 -0800 (0:00:00.019)       0:01:41.004 ******* 
skipping: [pg-standby-1] => {"false_condition": "inventory_hostname in groups['pg_primary']"}

RUNNING HANDLER [repmgr : Reload systemd] **************************************
Monday 15 December 2025  23:31:52 -0800 (0:00:00.015)       0:01:41.020 ******* 
ok: [pg-standby-1] => {"changed": false, "name": null, "status": {}}

PLAY [Configure repmgr for high availability] **********************************

TASK [repmgr : Install repmgr for PostgreSQL 17] *******************************
Monday 15 December 2025  23:31:53 -0800 (0:00:00.916)       0:01:41.937 ******* 
changed: [pg-standby-2] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  repmgr-common\nThe following NEW packages will be installed:\n  postgresql-17-repmgr repmgr-common\n0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.\nNeed to get 432 kB of archives.\nAfter this operation, 1285 kB of additional disk space will be used.\nGet:1 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 repmgr-common all 5.5.0+debpgdg-3.pgdg22.04+1 [190 kB]\nGet:2 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 postgresql-17-repmgr amd64 5.5.0+debpgdg-3.pgdg22.04+1 [242 kB]\nFetched 432 kB in 0s (19.5 MB/s)\nSelecting previously unselected package repmgr-common.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 75223 files and directories currently installed.)\r\nPreparing to unpack .../repmgr-common_5.5.0+debpgdg-3.pgdg22.04+1_all.deb ...\r\nUnpacking repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSelecting previously unselected package postgresql-17-repmgr.\r\nPreparing to unpack .../postgresql-17-repmgr_5.5.0+debpgdg-3.pgdg22.04+1_amd64.deb ...\r\nUnpacking postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSetting up repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nSetting up postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...\r\nProcessing triggers for postgresql-common (287.pgdg22.04+1) ...\r\nBuilding PostgreSQL dictionaries from installed myspell/hunspell packages...\r\nRemoving obsolete dictionary files:\r\n\nRunning kernel seems to be up-to-date.\n\nNo services need to be restarted.\n\nNo containers need to be restarted.\n\nNo user sessions are running outdated binaries.\n\nNo VM guests are running outdated hypervisor (qemu) binaries on this host.\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  repmgr-common", "The following NEW packages will be installed:", "  postgresql-17-repmgr repmgr-common", "0 upgraded, 2 newly installed, 0 to remove and 1 not upgraded.", "Need to get 432 kB of archives.", "After this operation, 1285 kB of additional disk space will be used.", "Get:1 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 repmgr-common all 5.5.0+debpgdg-3.pgdg22.04+1 [190 kB]", "Get:2 http://apt.postgresql.org/pub/repos/apt jammy-pgdg/main amd64 postgresql-17-repmgr amd64 5.5.0+debpgdg-3.pgdg22.04+1 [242 kB]", "Fetched 432 kB in 0s (19.5 MB/s)", "Selecting previously unselected package repmgr-common.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 75223 files and directories currently installed.)", "Preparing to unpack .../repmgr-common_5.5.0+debpgdg-3.pgdg22.04+1_all.deb ...", "Unpacking repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Selecting previously unselected package postgresql-17-repmgr.", "Preparing to unpack .../postgresql-17-repmgr_5.5.0+debpgdg-3.pgdg22.04+1_amd64.deb ...", "Unpacking postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Setting up repmgr-common (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Setting up postgresql-17-repmgr (5.5.0+debpgdg-3.pgdg22.04+1) ...", "Processing triggers for postgresql-common (287.pgdg22.04+1) ...", "Building PostgreSQL dictionaries from installed myspell/hunspell packages...", "Removing obsolete dictionary files:", "", "Running kernel seems to be up-to-date.", "", "No services need to be restarted.", "", "No containers need to be restarted.", "", "No user sessions are running outdated binaries.", "", "No VM guests are running outdated hypervisor (qemu) binaries on this host."]}

TASK [repmgr : Enable repmgr in shared_preload_libraries] **********************
Monday 15 December 2025  23:31:59 -0800 (0:00:06.633)       0:01:48.570 ******* 
changed: [pg-standby-2] => {"backup": "", "changed": true, "msg": "line replaced"}

TASK [repmgr : Flush handlers to restart PostgreSQL with repmgr loaded] ********
Monday 15 December 2025  23:32:00 -0800 (0:00:00.642)       0:01:49.213 ******* 

RUNNING HANDLER [repmgr : Restart PostgreSQL] **********************************
Monday 15 December 2025  23:32:00 -0800 (0:00:00.004)       0:01:49.218 ******* 
changed: [pg-standby-2] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ActiveEnterTimestampMonotonic": "1816684725", "ActiveExitTimestamp": "Tue 2025-12-16 07:30:47 UTC", "ActiveExitTimestampMonotonic": "1814336528", "ActiveState": "active", "After": "basic.target system.slice postgresql@17-main.service sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:30:49 UTC", "AssertTimestampMonotonic": "1816678368", "Before": "repmgrd.service shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1139000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ConditionTimestampMonotonic": "1816678366", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ExecMainExitTimestampMonotonic": "1816684402", "ExecMainPID": "9286", "ExecMainStartTimestamp": "Tue 2025-12-16 07:30:49 UTC", "ExecMainStartTimestampMonotonic": "1816683118", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:30:47 UTC", "InactiveEnterTimestampMonotonic": "1814336528", "InactiveExitTimestamp": "Tue 2025-12-16 07:30:49 UTC", "InactiveExitTimestampMonotonic": "1816683472", "InvocationID": "4eec8d6766ef45b7af138db137a4aba7", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:30:49 UTC", "StateChangeTimestampMonotonic": "1816684725", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Create repmgr config directory] *********************************
Monday 15 December 2025  23:32:03 -0800 (0:00:03.141)       0:01:52.360 ******* 
changed: [pg-standby-2] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/etc/repmgr", "size": 4096, "state": "directory", "uid": 115}

TASK [repmgr : Create repmgr log directory] ************************************
Monday 15 December 2025  23:32:04 -0800 (0:00:00.655)       0:01:53.016 ******* 
changed: [pg-standby-2] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/var/log/repmgr", "size": 4096, "state": "directory", "uid": 115}

TASK [repmgr : Configure repmgr.conf] ******************************************
Monday 15 December 2025  23:32:04 -0800 (0:00:00.621)       0:01:53.637 ******* 
changed: [pg-standby-2] => {"changed": true, "checksum": "f2565894d336bf9c4cfe0101612f620c674d3a46", "dest": "/etc/repmgr.conf", "gid": 123, "group": "postgres", "md5sum": "ab92324e172800e923c871928f974bcc", "mode": "0644", "owner": "postgres", "size": 3276, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870325.086151-33872-150812035725172/.source.conf", "state": "file", "uid": 115}

TASK [repmgr : Create .pgpass file for postgres user] **************************
Monday 15 December 2025  23:32:08 -0800 (0:00:03.349)       0:01:56.987 ******* 
changed: [pg-standby-2] => {"changed": true, "checksum": "22396b3e0ba326b410cb2ac2f8dd8680367c012d", "dest": "/var/lib/postgresql/.pgpass", "gid": 123, "group": "postgres", "md5sum": "bb0d8a710ed2d0e3c7186cea263f9761", "mode": "0600", "owner": "postgres", "size": 526, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870328.4634829-33890-137995658919430/.source", "state": "file", "uid": 115}

TASK [repmgr : Configure repmgrd systemd service] ******************************
Monday 15 December 2025  23:32:11 -0800 (0:00:03.382)       0:02:00.369 ******* 
changed: [pg-standby-2] => {"changed": true, "checksum": "f3d617d601a730829406362cc942cb8fe75dc0c5", "dest": "/etc/systemd/system/repmgrd.service", "gid": 0, "group": "root", "md5sum": "ab12c5c3cc42f20899338b12949b84bc", "mode": "0644", "owner": "root", "size": 563, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870331.8462038-33911-95514679817953/.source.service", "state": "file", "uid": 0}

TASK [repmgr : Register primary node] ******************************************
Monday 15 December 2025  23:32:15 -0800 (0:00:03.434)       0:02:03.803 ******* 
skipping: [pg-standby-2] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Stop PostgreSQL on standby nodes for cloning] *******************
Monday 15 December 2025  23:32:15 -0800 (0:00:00.020)       0:02:03.824 ******* 
changed: [pg-standby-2] => {"changed": true, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ActiveEnterTimestampMonotonic": "1890345924", "ActiveExitTimestamp": "Tue 2025-12-16 07:32:01 UTC", "ActiveExitTimestampMonotonic": "1888000809", "ActiveState": "active", "After": "basic.target system.slice postgresql@17-main.service sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:03 UTC", "AssertTimestampMonotonic": "1890338117", "Before": "repmgrd.service shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1138000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ConditionTimestampMonotonic": "1890338115", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ExecMainExitTimestampMonotonic": "1890345606", "ExecMainPID": "9552", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ExecMainStartTimestampMonotonic": "1890344137", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:32:03 UTC] ; stop_time=[Tue 2025-12-16 07:32:03 UTC] ; pid=9552 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:32:03 UTC] ; stop_time=[Tue 2025-12-16 07:32:03 UTC] ; pid=9552 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:32:01 UTC", "InactiveEnterTimestampMonotonic": "1888000809", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:03 UTC", "InactiveExitTimestampMonotonic": "1890344418", "InvocationID": "f9607e3780224b71b44f022815ca389f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:03 UTC", "StateChangeTimestampMonotonic": "1890345924", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Remove existing data directory on standby] **********************
Monday 15 December 2025  23:32:15 -0800 (0:00:00.791)       0:02:04.616 ******* 
changed: [pg-standby-2] => {"changed": true, "path": "/var/lib/postgresql/17/main", "state": "absent"}

TASK [repmgr : Clone standby from primary] *************************************
Monday 15 December 2025  23:32:16 -0800 (0:00:00.643)       0:02:05.259 ******* 
changed: [pg-standby-2] => {"changed": true, "cmd": ["sudo", "-u", "postgres", "repmgr", "-h", "10.0.1.105", "-U", "repmgr", "-d", "repmgr", "-f", "/etc/repmgr.conf", "standby", "clone", "--fast-checkpoint"], "delta": "0:00:00.549244", "end": "2025-12-16 07:32:17.578726", "msg": "", "rc": 0, "start": "2025-12-16 07:32:17.029482", "stderr": "WARNING: the following problems were found in the configuration file:\n  upstream_node_id='1': unknown name/value pair provided; ignoring\nNOTICE: destination directory \"/var/lib/postgresql/17/main\" provided\nINFO: connecting to source node\nDETAIL: connection string is: host=10.0.1.105 user=repmgr dbname=repmgr\nDETAIL: current installation size is 29 MB\nNOTICE: checking for available walsenders on the source node (2 required)\nNOTICE: checking replication connections can be made to the source server (2 required)\nINFO: creating directory \"/var/lib/postgresql/17/main\"...\nNOTICE: starting backup (using pg_basebackup)...\nINFO: executing:\n  /usr/lib/postgresql/17/bin/pg_basebackup -l \"repmgr base backup\"  -D /var/lib/postgresql/17/main -h 10.0.1.105 -p 5432 -U repmgr -c fast -X stream -S repmgr_slot_3 \nNOTICE: standby clone (using pg_basebackup) complete\nNOTICE: you can now start your PostgreSQL server\nHINT: for example: sudo systemctl start postgresql\nHINT: after starting the server, you need to register this standby with \"repmgr standby register\"", "stderr_lines": ["WARNING: the following problems were found in the configuration file:", "  upstream_node_id='1': unknown name/value pair provided; ignoring", "NOTICE: destination directory \"/var/lib/postgresql/17/main\" provided", "INFO: connecting to source node", "DETAIL: connection string is: host=10.0.1.105 user=repmgr dbname=repmgr", "DETAIL: current installation size is 29 MB", "NOTICE: checking for available walsenders on the source node (2 required)", "NOTICE: checking replication connections can be made to the source server (2 required)", "INFO: creating directory \"/var/lib/postgresql/17/main\"...", "NOTICE: starting backup (using pg_basebackup)...", "INFO: executing:", "  /usr/lib/postgresql/17/bin/pg_basebackup -l \"repmgr base backup\"  -D /var/lib/postgresql/17/main -h 10.0.1.105 -p 5432 -U repmgr -c fast -X stream -S repmgr_slot_3 ", "NOTICE: standby clone (using pg_basebackup) complete", "NOTICE: you can now start your PostgreSQL server", "HINT: for example: sudo systemctl start postgresql", "HINT: after starting the server, you need to register this standby with \"repmgr standby register\""], "stdout": "", "stdout_lines": []}

TASK [repmgr : Start PostgreSQL on standby nodes] ******************************
Monday 15 December 2025  23:32:17 -0800 (0:00:01.164)       0:02:06.424 ******* 
changed: [pg-standby-2] => {"changed": true, "name": "postgresql", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ActiveEnterTimestampMonotonic": "1890345924", "ActiveExitTimestamp": "Tue 2025-12-16 07:32:15 UTC", "ActiveExitTimestampMonotonic": "1902587111", "ActiveState": "inactive", "After": "basic.target system.slice postgresql@17-main.service sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:03 UTC", "AssertTimestampMonotonic": "1890338117", "Before": "repmgrd.service shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1138000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ConditionTimestampMonotonic": "1890338115", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@17-main.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ExecMainExitTimestampMonotonic": "1890345606", "ExecMainPID": "9552", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:03 UTC", "ExecMainStartTimestampMonotonic": "1890344137", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:32:03 UTC] ; stop_time=[Tue 2025-12-16 07:32:03 UTC] ; pid=9552 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[Tue 2025-12-16 07:32:03 UTC] ; stop_time=[Tue 2025-12-16 07:32:03 UTC] ; pid=9552 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Tue 2025-12-16 07:32:15 UTC", "InactiveEnterTimestampMonotonic": "1902587111", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:03 UTC", "InactiveExitTimestampMonotonic": "1890344418", "InvocationID": "f9607e3780224b71b44f022815ca389f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@17-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:15 UTC", "StateChangeTimestampMonotonic": "1902587111", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql@17-main.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Wait for PostgreSQL to be ready on standby] *********************
Monday 15 December 2025  23:32:20 -0800 (0:00:02.968)       0:02:09.392 ******* 
ok: [pg-standby-2] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 5432, "search_regex": null, "state": "started"}

TASK [repmgr : Register standby nodes] *****************************************
Monday 15 December 2025  23:32:21 -0800 (0:00:00.607)       0:02:10.000 ******* 
ok: [pg-standby-2] => {"changed": false, "cmd": ["sudo", "-u", "postgres", "repmgr", "-f", "/etc/repmgr.conf", "standby", "register", "--force"], "delta": "0:00:00.086697", "end": "2025-12-16 07:32:21.854141", "failed_when_result": false, "msg": "", "rc": 0, "start": "2025-12-16 07:32:21.767444", "stderr": "WARNING: the following problems were found in the configuration file:\n  upstream_node_id='1': unknown name/value pair provided; ignoring\nINFO: connecting to local node \"pg-standby-2\" (ID: 3)\nINFO: connecting to primary database\nWARNING: --upstream-node-id not supplied, assuming upstream node is primary (node ID: 1)\nINFO: standby registration complete\nNOTICE: standby node \"pg-standby-2\" (ID: 3) successfully registered", "stderr_lines": ["WARNING: the following problems were found in the configuration file:", "  upstream_node_id='1': unknown name/value pair provided; ignoring", "INFO: connecting to local node \"pg-standby-2\" (ID: 3)", "INFO: connecting to primary database", "WARNING: --upstream-node-id not supplied, assuming upstream node is primary (node ID: 1)", "INFO: standby registration complete", "NOTICE: standby node \"pg-standby-2\" (ID: 3) successfully registered"], "stdout": "", "stdout_lines": []}

TASK [repmgr : Enable and start repmgrd service] *******************************
Monday 15 December 2025  23:32:21 -0800 (0:00:00.697)       0:02:10.698 ******* 
changed: [pg-standby-2] => {"changed": true, "enabled": true, "name": "repmgrd", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:31:57 UTC", "ActiveEnterTimestampMonotonic": "1883951927", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "postgresql.service sysinit.target basic.target systemd-journald.socket system.slice -.mount", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:31:57 UTC", "AssertTimestampMonotonic": "1883945098", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1283000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanClean": "runtime", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:31:57 UTC", "ConditionTimestampMonotonic": "1883945097", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "repmgr daemon", "DevicePolicy": "auto", "Documentation": "https://repmgr.org", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/repmgrd ; argv[]=/usr/bin/repmgrd -f /etc/repmgr.conf --pid-file=/var/run/repmgr/repmgrd.pid ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/repmgrd ; argv[]=/usr/bin/repmgrd -f /etc/repmgr.conf --pid-file=/var/run/repmgr/repmgrd.pid ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/repmgrd.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "repmgrd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:31:57 UTC", "InactiveExitTimestampMonotonic": "1883950404", "InvocationID": "e0d69cf6cfb047aa8c7aee48e1db05c7", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "repmgrd.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "PIDFile": "/run/repmgr/repmgrd.pid", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "ReadWritePaths": "/var/log/repmgr /var/run/repmgr", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "postgresql.service system.slice -.mount sysinit.target", "RequiresMountsFor": "/run/repmgr", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectory": "repmgr", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:31:57 UTC", "StateChangeTimestampMonotonic": "1883951927", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "postgres", "UtmpMode": "init", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [repmgr : Verify cluster status] ******************************************
Monday 15 December 2025  23:32:23 -0800 (0:00:01.672)       0:02:12.370 ******* 
skipping: [pg-standby-2] => {"changed": false, "false_condition": "inventory_hostname in groups['pg_primary']", "skip_reason": "Conditional result was False"}

TASK [repmgr : Display cluster status] *****************************************
Monday 15 December 2025  23:32:23 -0800 (0:00:00.013)       0:02:12.384 ******* 
skipping: [pg-standby-2] => {"false_condition": "inventory_hostname in groups['pg_primary']"}

RUNNING HANDLER [repmgr : Reload systemd] **************************************
Monday 15 December 2025  23:32:23 -0800 (0:00:00.017)       0:02:12.401 ******* 
ok: [pg-standby-2] => {"changed": false, "name": null, "status": {}}

PLAY [Deploy health check service on PostgreSQL nodes] *************************

TASK [pg_healthcheck : Install Python dependencies for health check] ***********
Monday 15 December 2025  23:32:24 -0800 (0:00:00.907)       0:02:13.309 ******* 
ok: [pg-standby-1] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": false}
ok: [pg-standby-2] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": false}
ok: [pg-primary] => {"cache_update_time": 1765870230, "cache_updated": false, "changed": false}

TASK [pg_healthcheck : Create health check script directory] *******************
Monday 15 December 2025  23:32:27 -0800 (0:00:02.961)       0:02:16.271 ******* 
changed: [pg-standby-1] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/opt/pg-healthcheck", "size": 4096, "state": "directory", "uid": 115}
changed: [pg-standby-2] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/opt/pg-healthcheck", "size": 4096, "state": "directory", "uid": 115}
changed: [pg-primary] => {"changed": true, "gid": 123, "group": "postgres", "mode": "0755", "owner": "postgres", "path": "/opt/pg-healthcheck", "size": 4096, "state": "directory", "uid": 115}

TASK [pg_healthcheck : Deploy PostgreSQL health check service] *****************
Monday 15 December 2025  23:32:28 -0800 (0:00:00.638)       0:02:16.909 ******* 
changed: [pg-standby-2] => {"changed": true, "checksum": "abd916b33abe5d408a5ec5c2bf923818877a00ef", "dest": "/opt/pg-healthcheck/pg_healthcheck.py", "gid": 123, "group": "postgres", "md5sum": "45c25f10a2f8ca78b462e4902f53878c", "mode": "0755", "owner": "postgres", "size": 5901, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870348.328539-33990-73826868869536/.source.py", "state": "file", "uid": 115}
changed: [pg-primary] => {"changed": true, "checksum": "abd916b33abe5d408a5ec5c2bf923818877a00ef", "dest": "/opt/pg-healthcheck/pg_healthcheck.py", "gid": 123, "group": "postgres", "md5sum": "45c25f10a2f8ca78b462e4902f53878c", "mode": "0755", "owner": "postgres", "size": 5901, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870348.397812-33988-191987693273015/.source.py", "state": "file", "uid": 115}
changed: [pg-standby-1] => {"changed": true, "checksum": "abd916b33abe5d408a5ec5c2bf923818877a00ef", "dest": "/opt/pg-healthcheck/pg_healthcheck.py", "gid": 123, "group": "postgres", "md5sum": "45c25f10a2f8ca78b462e4902f53878c", "mode": "0755", "owner": "postgres", "size": 5901, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870348.319061-33989-168582150162197/.source.py", "state": "file", "uid": 115}

TASK [pg_healthcheck : Create systemd service for health check] ****************
Monday 15 December 2025  23:32:32 -0800 (0:00:04.409)       0:02:21.318 ******* 
changed: [pg-standby-2] => {"changed": true, "checksum": "b2e54ece387299a876f9196e0eb25b7393ec0a20", "dest": "/etc/systemd/system/pg-healthcheck.service", "gid": 0, "group": "root", "md5sum": "30719d83aa0d02d7ac91c8039598f7a1", "mode": "0644", "owner": "root", "size": 450, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870352.747744-34027-227395224679225/.source.service", "state": "file", "uid": 0}
changed: [pg-primary] => {"changed": true, "checksum": "b2e54ece387299a876f9196e0eb25b7393ec0a20", "dest": "/etc/systemd/system/pg-healthcheck.service", "gid": 0, "group": "root", "md5sum": "30719d83aa0d02d7ac91c8039598f7a1", "mode": "0644", "owner": "root", "size": 450, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870352.7444742-34025-121625306148/.source.service", "state": "file", "uid": 0}
changed: [pg-standby-1] => {"changed": true, "checksum": "b2e54ece387299a876f9196e0eb25b7393ec0a20", "dest": "/etc/systemd/system/pg-healthcheck.service", "gid": 0, "group": "root", "md5sum": "30719d83aa0d02d7ac91c8039598f7a1", "mode": "0644", "owner": "root", "size": 450, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870352.7955909-34026-221033937328570/.source.service", "state": "file", "uid": 0}

TASK [pg_healthcheck : Enable and start pg-healthcheck service] ****************
Monday 15 December 2025  23:32:36 -0800 (0:00:03.859)       0:02:25.178 ******* 
changed: [pg-standby-2] => {"changed": true, "enabled": true, "name": "pg-healthcheck", "state": "started", "status": {"ActiveEnterTimestamp": "n/a", "ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "systemd-journald.socket postgresql.service sysinit.target basic.target system.slice", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestamp": "n/a", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestamp": "n/a", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL Health Check HTTP Server", "DevicePolicy": "auto", "Documentation": "https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/pg-healthcheck.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "pg-healthcheck.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "n/a", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "pg-healthcheck.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "n/a", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "postgres", "UtmpMode": "init", "Wants": "postgresql.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
changed: [pg-primary] => {"changed": true, "enabled": true, "name": "pg-healthcheck", "state": "started", "status": {"ActiveEnterTimestamp": "n/a", "ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "postgresql.service system.slice sysinit.target basic.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestamp": "n/a", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestamp": "n/a", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL Health Check HTTP Server", "DevicePolicy": "auto", "Documentation": "https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/pg-healthcheck.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "pg-healthcheck.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "n/a", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "pg-healthcheck.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "n/a", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "postgres", "UtmpMode": "init", "Wants": "postgresql.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
changed: [pg-standby-1] => {"changed": true, "enabled": true, "name": "pg-healthcheck", "state": "started", "status": {"ActiveEnterTimestamp": "n/a", "ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "systemd-journald.socket sysinit.target postgresql.service system.slice basic.target", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestamp": "n/a", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestamp": "n/a", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL Health Check HTTP Server", "DevicePolicy": "auto", "Documentation": "https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/pg-healthcheck.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "pg-healthcheck.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "n/a", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "pg-healthcheck.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "n/a", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "postgres", "UtmpMode": "init", "Wants": "postgresql.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}

TASK [pg_healthcheck : Wait for health check service to be ready] **************
Monday 15 December 2025  23:32:37 -0800 (0:00:01.561)       0:02:26.739 ******* 
ok: [pg-primary] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 8008, "search_regex": null, "state": "started"}
ok: [pg-standby-2] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 8008, "search_regex": null, "state": "started"}
ok: [pg-standby-1] => {"changed": false, "elapsed": 0, "match_groupdict": {}, "match_groups": [], "path": null, "port": 8008, "search_regex": null, "state": "started"}

TASK [pg_healthcheck : Verify health check endpoint] ***************************
Monday 15 December 2025  23:32:38 -0800 (0:00:00.645)       0:02:27.385 ******* 
[ERROR]: Task failed: Module failed: Status code was 503 and not [200]: HTTP Error 503: Service Unavailable
Origin: /Users/geoffmontee/pg-ha-cluster/ansible/roles/pg_healthcheck/tasks/main.yml:53:3

51     timeout: 30
52
53 - name: Verify health check endpoint
     ^ column 3

fatal: [pg-primary]: FAILED! => {"changed": false, "content": "{\"status\": \"error\", \"message\": \"cannot get info\"}", "content_type": "application/json", "date": "Tue, 16 Dec 2025 07:32:39 GMT", "elapsed": 0, "json": {"message": "cannot get info", "status": "error"}, "msg": "Status code was 503 and not [200]: HTTP Error 503: Service Unavailable", "redirected": false, "server": "BaseHTTP/0.6 Python/3.10.12", "status": 503, "url": "http://localhost:8008/health"}
...ignoring
fatal: [pg-standby-2]: FAILED! => {"changed": false, "content": "{\"status\": \"error\", \"message\": \"cannot get info\"}", "content_type": "application/json", "date": "Tue, 16 Dec 2025 07:32:39 GMT", "elapsed": 0, "json": {"message": "cannot get info", "status": "error"}, "msg": "Status code was 503 and not [200]: HTTP Error 503: Service Unavailable", "redirected": false, "server": "BaseHTTP/0.6 Python/3.10.12", "status": 503, "url": "http://localhost:8008/health"}
...ignoring
fatal: [pg-standby-1]: FAILED! => {"changed": false, "content": "{\"status\": \"error\", \"message\": \"cannot get info\"}", "content_type": "application/json", "date": "Tue, 16 Dec 2025 07:32:39 GMT", "elapsed": 0, "json": {"message": "cannot get info", "status": "error"}, "msg": "Status code was 503 and not [200]: HTTP Error 503: Service Unavailable", "redirected": false, "server": "BaseHTTP/0.6 Python/3.10.12", "status": 503, "url": "http://localhost:8008/health"}
...ignoring

TASK [pg_healthcheck : Display health check status] ****************************
Monday 15 December 2025  23:32:40 -0800 (0:00:01.586)       0:02:28.971 ******* 
skipping: [pg-primary] => {"false_condition": "healthcheck_result is succeeded"}
skipping: [pg-standby-1] => {"false_condition": "healthcheck_result is succeeded"}
skipping: [pg-standby-2] => {"false_condition": "healthcheck_result is succeeded"}

RUNNING HANDLER [pg_healthcheck : Restart pg-healthcheck] **********************
Monday 15 December 2025  23:32:40 -0800 (0:00:00.045)       0:02:29.017 ******* 
changed: [pg-primary] => {"changed": true, "name": "pg-healthcheck", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ActiveEnterTimestampMonotonic": "1923532458", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target system.slice postgresql.service systemd-journald.socket basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:37 UTC", "AssertTimestampMonotonic": "1923527154", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "94724000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ConditionTimestampMonotonic": "1923527152", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/pg-healthcheck.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL Health Check HTTP Server", "DevicePolicy": "auto", "Documentation": "https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/", "DynamicUser": "no", "EffectiveCPUs": "0-1", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10206", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ExecMainStartTimestampMonotonic": "1923532135", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/pg-healthcheck.service", "FreezerState": "running", "GID": "123", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "pg-healthcheck.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:37 UTC", "InactiveExitTimestampMonotonic": "1923532458", "InvocationID": "5bcd42437dc34fb8b3aea959d9f4bd07", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15267", "LimitNPROCSoft": "15267", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15267", "LimitSIGPENDINGSoft": "15267", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10206", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "10465280", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "pg-healthcheck.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:37 UTC", "StateChangeTimestampMonotonic": "1923532458", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "1", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "115", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-standby-2] => {"changed": true, "name": "pg-healthcheck", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ActiveEnterTimestampMonotonic": "1924358357", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "basic.target sysinit.target system.slice systemd-journald.socket postgresql.service", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:37 UTC", "AssertTimestampMonotonic": "1924353723", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "76992000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ConditionTimestampMonotonic": "1924353721", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/pg-healthcheck.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL Health Check HTTP Server", "DevicePolicy": "auto", "Documentation": "https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/", "DynamicUser": "no", "EffectiveCPUs": "0-1", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10034", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ExecMainStartTimestampMonotonic": "1924358089", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/pg-healthcheck.service", "FreezerState": "running", "GID": "123", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "pg-healthcheck.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:37 UTC", "InactiveExitTimestampMonotonic": "1924358357", "InvocationID": "7f3259b5226f43cd9020caaa93f52c7f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10034", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "10457088", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "pg-healthcheck.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:37 UTC", "StateChangeTimestampMonotonic": "1924358357", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "1", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "115", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
changed: [pg-standby-1] => {"changed": true, "name": "pg-healthcheck", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ActiveEnterTimestampMonotonic": "1926290413", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice basic.target sysinit.target postgresql.service systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:37 UTC", "AssertTimestampMonotonic": "1926284974", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "92764000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ConditionTimestampMonotonic": "1926284972", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/pg-healthcheck.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "PostgreSQL Health Check HTTP Server", "DevicePolicy": "auto", "Documentation": "https://www.haproxy.com/blog/how-to-enable-health-checks-in-haproxy/", "DynamicUser": "no", "EffectiveCPUs": "0-1", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "9971", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:37 UTC", "ExecMainStartTimestampMonotonic": "1926290110", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/python3 ; argv[]=/usr/bin/python3 /opt/pg-healthcheck/pg_healthcheck.py ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/pg-healthcheck.service", "FreezerState": "running", "GID": "123", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "pg-healthcheck.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:37 UTC", "InactiveExitTimestampMonotonic": "1926290413", "InvocationID": "b37790a8107f4418ae4301e653ff781c", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "15268", "LimitNPROCSoft": "15268", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "15268", "LimitSIGPENDINGSoft": "15268", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "9971", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "10465280", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "pg-healthcheck.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "yes", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "strict", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "5s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:37 UTC", "StateChangeTimestampMonotonic": "1926290413", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "1", "TasksMax": "4580", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "115", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "postgresql.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

PLAY [Install and configure HAProxy load balancer] *****************************

TASK [haproxy : Install HAProxy] ***********************************************
Monday 15 December 2025  23:32:41 -0800 (0:00:01.182)       0:02:30.200 ******* 
changed: [haproxy] => {"cache_update_time": 1765869052, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  liblua5.3-0\nSuggested packages:\n  vim-haproxy haproxy-doc\nThe following NEW packages will be installed:\n  haproxy liblua5.3-0\n0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 1795 kB of archives.\nAfter this operation, 4228 kB of additional disk space will be used.\nGet:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 liblua5.3-0 amd64 5.3.6-1build1 [140 kB]\nGet:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 haproxy amd64 2.4.29-0ubuntu0.22.04.1 [1655 kB]\nFetched 1795 kB in 0s (43.0 MB/s)\nSelecting previously unselected package liblua5.3-0:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 72871 files and directories currently installed.)\r\nPreparing to unpack .../liblua5.3-0_5.3.6-1build1_amd64.deb ...\r\nUnpacking liblua5.3-0:amd64 (5.3.6-1build1) ...\r\nSelecting previously unselected package haproxy.\r\nPreparing to unpack .../haproxy_2.4.29-0ubuntu0.22.04.1_amd64.deb ...\r\nUnpacking haproxy (2.4.29-0ubuntu0.22.04.1) ...\r\nSetting up liblua5.3-0:amd64 (5.3.6-1build1) ...\r\nSetting up haproxy (2.4.29-0ubuntu0.22.04.1) ...\r\nCreated symlink /etc/systemd/system/multi-user.target.wants/haproxy.service  /lib/systemd/system/haproxy.service.\r\nProcessing triggers for libc-bin (2.35-0ubuntu3.11) ...\r\nProcessing triggers for rsyslog (8.2112.0-2ubuntu2.2) ...\r\nProcessing triggers for man-db (2.10.2-1) ...\r\n\nRunning kernel seems to be up-to-date.\n\nNo services need to be restarted.\n\nNo containers need to be restarted.\n\nNo user sessions are running outdated binaries.\n\nNo VM guests are running outdated hypervisor (qemu) binaries on this host.\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  liblua5.3-0", "Suggested packages:", "  vim-haproxy haproxy-doc", "The following NEW packages will be installed:", "  haproxy liblua5.3-0", "0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.", "Need to get 1795 kB of archives.", "After this operation, 4228 kB of additional disk space will be used.", "Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 liblua5.3-0 amd64 5.3.6-1build1 [140 kB]", "Get:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 haproxy amd64 2.4.29-0ubuntu0.22.04.1 [1655 kB]", "Fetched 1795 kB in 0s (43.0 MB/s)", "Selecting previously unselected package liblua5.3-0:amd64.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 72871 files and directories currently installed.)", "Preparing to unpack .../liblua5.3-0_5.3.6-1build1_amd64.deb ...", "Unpacking liblua5.3-0:amd64 (5.3.6-1build1) ...", "Selecting previously unselected package haproxy.", "Preparing to unpack .../haproxy_2.4.29-0ubuntu0.22.04.1_amd64.deb ...", "Unpacking haproxy (2.4.29-0ubuntu0.22.04.1) ...", "Setting up liblua5.3-0:amd64 (5.3.6-1build1) ...", "Setting up haproxy (2.4.29-0ubuntu0.22.04.1) ...", "Created symlink /etc/systemd/system/multi-user.target.wants/haproxy.service  /lib/systemd/system/haproxy.service.", "Processing triggers for libc-bin (2.35-0ubuntu3.11) ...", "Processing triggers for rsyslog (8.2112.0-2ubuntu2.2) ...", "Processing triggers for man-db (2.10.2-1) ...", "", "Running kernel seems to be up-to-date.", "", "No services need to be restarted.", "", "No containers need to be restarted.", "", "No user sessions are running outdated binaries.", "", "No VM guests are running outdated hypervisor (qemu) binaries on this host."]}

TASK [haproxy : Install PostgreSQL client for health checks] *******************
Monday 15 December 2025  23:32:49 -0800 (0:00:07.704)       0:02:37.904 ******* 
changed: [haproxy] => {"cache_update_time": 1765869052, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  postgresql-client-14 postgresql-client-common\nSuggested packages:\n  postgresql-14 postgresql-doc-14\nThe following NEW packages will be installed:\n  postgresql-client postgresql-client-14 postgresql-client-common\n0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 1283 kB of archives.\nAfter this operation, 4447 kB of additional disk space will be used.\nGet:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 postgresql-client-common all 238 [29.6 kB]\nGet:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 postgresql-client-14 amd64 14.20-0ubuntu0.22.04.1 [1250 kB]\nGet:3 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 postgresql-client all 14+238 [3292 B]\nFetched 1283 kB in 0s (27.3 MB/s)\nSelecting previously unselected package postgresql-client-common.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 72968 files and directories currently installed.)\r\nPreparing to unpack .../postgresql-client-common_238_all.deb ...\r\nUnpacking postgresql-client-common (238) ...\r\nSelecting previously unselected package postgresql-client-14.\r\nPreparing to unpack .../postgresql-client-14_14.20-0ubuntu0.22.04.1_amd64.deb ...\r\nUnpacking postgresql-client-14 (14.20-0ubuntu0.22.04.1) ...\r\nSelecting previously unselected package postgresql-client.\r\nPreparing to unpack .../postgresql-client_14+238_all.deb ...\r\nUnpacking postgresql-client (14+238) ...\r\nSetting up postgresql-client-common (238) ...\r\nSetting up postgresql-client-14 (14.20-0ubuntu0.22.04.1) ...\r\nupdate-alternatives: using /usr/share/postgresql/14/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode\r\nSetting up postgresql-client (14+238) ...\r\nProcessing triggers for man-db (2.10.2-1) ...\r\n\nRunning kernel seems to be up-to-date.\n\nNo services need to be restarted.\n\nNo containers need to be restarted.\n\nNo user sessions are running outdated binaries.\n\nNo VM guests are running outdated hypervisor (qemu) binaries on this host.\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  postgresql-client-14 postgresql-client-common", "Suggested packages:", "  postgresql-14 postgresql-doc-14", "The following NEW packages will be installed:", "  postgresql-client postgresql-client-14 postgresql-client-common", "0 upgraded, 3 newly installed, 0 to remove and 0 not upgraded.", "Need to get 1283 kB of archives.", "After this operation, 4447 kB of additional disk space will be used.", "Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 postgresql-client-common all 238 [29.6 kB]", "Get:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 postgresql-client-14 amd64 14.20-0ubuntu0.22.04.1 [1250 kB]", "Get:3 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 postgresql-client all 14+238 [3292 B]", "Fetched 1283 kB in 0s (27.3 MB/s)", "Selecting previously unselected package postgresql-client-common.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 72968 files and directories currently installed.)", "Preparing to unpack .../postgresql-client-common_238_all.deb ...", "Unpacking postgresql-client-common (238) ...", "Selecting previously unselected package postgresql-client-14.", "Preparing to unpack .../postgresql-client-14_14.20-0ubuntu0.22.04.1_amd64.deb ...", "Unpacking postgresql-client-14 (14.20-0ubuntu0.22.04.1) ...", "Selecting previously unselected package postgresql-client.", "Preparing to unpack .../postgresql-client_14+238_all.deb ...", "Unpacking postgresql-client (14+238) ...", "Setting up postgresql-client-common (238) ...", "Setting up postgresql-client-14 (14.20-0ubuntu0.22.04.1) ...", "update-alternatives: using /usr/share/postgresql/14/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode", "Setting up postgresql-client (14+238) ...", "Processing triggers for man-db (2.10.2-1) ...", "", "Running kernel seems to be up-to-date.", "", "No services need to be restarted.", "", "No containers need to be restarted.", "", "No user sessions are running outdated binaries.", "", "No VM guests are running outdated hypervisor (qemu) binaries on this host."]}

TASK [haproxy : Create HAProxy health check script directory] ******************
Monday 15 December 2025  23:32:54 -0800 (0:00:05.846)       0:02:43.750 ******* 
changed: [haproxy] => {"changed": true, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/haproxy/scripts", "size": 4096, "state": "directory", "uid": 0}

TASK [haproxy : Deploy PostgreSQL health check script] *************************
Monday 15 December 2025  23:32:55 -0800 (0:00:00.633)       0:02:44.384 ******* 
changed: [haproxy] => {"changed": true, "checksum": "493e260fe70efa2fe8a7fee65790338a6043be4a", "dest": "/etc/haproxy/scripts/pg_check.sh", "gid": 0, "group": "root", "md5sum": "fa641c28cabb8e6d945abf8649d4b8f5", "mode": "0755", "owner": "root", "size": 1285, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870375.864293-34145-183088942104492/.source.sh", "state": "file", "uid": 0}

TASK [haproxy : Configure HAProxy] *********************************************
Monday 15 December 2025  23:32:59 -0800 (0:00:03.485)       0:02:47.869 ******* 
changed: [haproxy] => {"changed": true, "checksum": "126fa429333dbdd7a9c5b54cce15e4febcad10b2", "dest": "/etc/haproxy/haproxy.cfg", "gid": 0, "group": "root", "md5sum": "fb4e7fc7a56f7948b53a77c4c10137d9", "mode": "0644", "owner": "root", "size": 3193, "src": "/home/ubuntu/.ansible/tmp/ansible-tmp-1765870379.333615-34163-168614237068632/.source.cfg", "state": "file", "uid": 0}

TASK [haproxy : Enable HAProxy service] ****************************************
Monday 15 December 2025  23:33:02 -0800 (0:00:03.389)       0:02:51.259 ******* 
ok: [haproxy] => {"changed": false, "enabled": true, "name": "haproxy", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:46 UTC", "ActiveEnterTimestampMonotonic": "1936234114", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "network-online.target system.slice systemd-journald.socket rsyslog.service sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:46 UTC", "AssertTimestampMonotonic": "1936181587", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "103788000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:46 UTC", "ConditionTimestampMonotonic": "1936181584", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "EffectiveCPUs": "0-1", "EffectiveMemoryNodes": "0", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "3469", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:46 UTC", "ExecMainStartTimestampMonotonic": "1936202146", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[n/a] ; pid=3469 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[n/a] ; pid=3469 ; code=(null) ; status=0/0 }", "ExecStartPre": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -c -q $EXTRAOPTS ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[Tue 2025-12-16 07:32:46 UTC] ; pid=3467 ; code=exited ; status=0 }", "ExecStartPreEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -c -q $EXTRAOPTS ; flags= ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[Tue 2025-12-16 07:32:46 UTC] ; pid=3467 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:46 UTC", "InactiveExitTimestampMonotonic": "1936187521", "InvocationID": "8d92504fd3c74547963b291fa75b4070", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7563", "LimitNPROCSoft": "7563", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7563", "LimitSIGPENDINGSoft": "7563", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "3469", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "72794112", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:46 UTC", "StateChangeTimestampMonotonic": "1936234114", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "3", "TasksMax": "2268", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [haproxy : Start HAProxy service] *****************************************
Monday 15 December 2025  23:33:03 -0800 (0:00:00.797)       0:02:52.057 ******* 
ok: [haproxy] => {"changed": false, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Tue 2025-12-16 07:32:46 UTC", "ActiveEnterTimestampMonotonic": "1936234114", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "network-online.target system.slice systemd-journald.socket rsyslog.service sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Tue 2025-12-16 07:32:46 UTC", "AssertTimestampMonotonic": "1936181587", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "103788000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Tue 2025-12-16 07:32:46 UTC", "ConditionTimestampMonotonic": "1936181584", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "EffectiveCPUs": "0-1", "EffectiveMemoryNodes": "0", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "3469", "ExecMainStartTimestamp": "Tue 2025-12-16 07:32:46 UTC", "ExecMainStartTimestampMonotonic": "1936202146", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[n/a] ; pid=3469 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[n/a] ; pid=3469 ; code=(null) ; status=0/0 }", "ExecStartPre": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -c -q $EXTRAOPTS ; ignore_errors=no ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[Tue 2025-12-16 07:32:46 UTC] ; pid=3467 ; code=exited ; status=0 }", "ExecStartPreEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -c -q $EXTRAOPTS ; flags= ; start_time=[Tue 2025-12-16 07:32:46 UTC] ; stop_time=[Tue 2025-12-16 07:32:46 UTC] ; pid=3467 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Tue 2025-12-16 07:32:46 UTC", "InactiveExitTimestampMonotonic": "1936187521", "InvocationID": "8d92504fd3c74547963b291fa75b4070", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7563", "LimitNPROCSoft": "7563", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7563", "LimitSIGPENDINGSoft": "7563", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "3469", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "72794112", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Tue 2025-12-16 07:32:46 UTC", "StateChangeTimestampMonotonic": "1936234114", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "3", "TasksMax": "2268", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [haproxy : Wait for HAProxy to be ready] **********************************
Monday 15 December 2025  23:33:04 -0800 (0:00:00.805)       0:02:52.862 ******* 
[ERROR]: Task failed: Module failed: Timeout when waiting for localhost:5432
Origin: /Users/geoffmontee/pg-ha-cluster/ansible/roles/haproxy/tasks/main.yml:55:3

53   become: true
54
55 - name: Wait for HAProxy to be ready
     ^ column 3

fatal: [haproxy]: FAILED! => {"changed": false, "elapsed": 60, "msg": "Timeout when waiting for localhost:5432"}

PLAY RECAP *********************************************************************
haproxy                    : ok=14   changed=5    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
pg-primary                 : ok=43   changed=21   unreachable=0    failed=0    skipped=7    rescued=0    ignored=2   
pg-standby-1               : ok=42   changed=23   unreachable=0    failed=0    skipped=8    rescued=0    ignored=1   
pg-standby-2               : ok=42   changed=23   unreachable=0    failed=0    skipped=8    rescued=0    ignored=1   


PLAYBOOK RECAP *****************************************************************
Playbook run took 0 days, 0 hours, 3 minutes, 53 seconds


TASKS RECAP ********************************************************************
Monday 15 December 2025  23:34:04 -0800 (0:01:00.720)       0:03:53.582 ******* 
=============================================================================== 
haproxy : Wait for HAProxy to be ready --------------------------------- 60.72s
repmgr : Install repmgr for PostgreSQL 17 ------------------------------ 18.30s
repmgr : Configure repmgr.conf ----------------------------------------- 13.14s
repmgr : Create .pgpass file for postgres user ------------------------- 11.67s
repmgr : Configure repmgrd systemd service ----------------------------- 11.07s
repmgr : Restart PostgreSQL --------------------------------------------- 9.53s
haproxy : Install HAProxy ----------------------------------------------- 7.70s
repmgr : Start PostgreSQL on standby nodes ------------------------------ 5.96s
haproxy : Install PostgreSQL client for health checks ------------------- 5.85s
repmgr : Enable and start repmgrd service ------------------------------- 5.60s
pg_healthcheck : Deploy PostgreSQL health check service ----------------- 4.41s
pg_healthcheck : Create systemd service for health check ---------------- 3.86s
postgresql : Configure postgresql.conf ---------------------------------- 3.75s
common : Configure sysctl for PostgreSQL -------------------------------- 3.67s
postgresql : Restart PostgreSQL ----------------------------------------- 3.57s
haproxy : Deploy PostgreSQL health check script ------------------------- 3.49s
haproxy : Configure HAProxy --------------------------------------------- 3.39s
repmgr : Reload systemd ------------------------------------------------- 3.26s
Gathering Facts --------------------------------------------------------- 3.24s
postgresql : Ensure PostgreSQL service is enabled and started ----------- 3.03s
